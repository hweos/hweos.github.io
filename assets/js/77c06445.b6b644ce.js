"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5791],{1879:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"frontend/engineering","title":"\u524d\u7aef\u5de5\u7a0b\u5316\u914d\u7f6e","description":"ESLint\u3001Prettier\u3001Husky \u4e00\u7ad9\u5f0f\u914d\u7f6e\u6307\u5357","source":"@site/docs/frontend/engineering.md","sourceDirName":"frontend","slug":"/frontend/frontend-engineering","permalink":"/docs/frontend/frontend-engineering","draft":false,"unlisted":false,"editUrl":"https://github.com/hweos/git-pages/edit/main/docs/frontend/engineering.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"slug":"frontend-engineering","title":"\u524d\u7aef\u5de5\u7a0b\u5316\u914d\u7f6e","description":"ESLint\u3001Prettier\u3001Husky \u4e00\u7ad9\u5f0f\u914d\u7f6e\u6307\u5357"},"sidebar":"docsSidebar","previous":{"title":"CSS \u5e03\u5c40\u6280\u5de7","permalink":"/docs/frontend/css-layout"},"next":{"title":"Weekly Report","permalink":"/docs/category/weekly-report"}}');var t=i(4848),r=i(8453);const l={sidebar_position:3,slug:"frontend-engineering",title:"\u524d\u7aef\u5de5\u7a0b\u5316\u914d\u7f6e",description:"ESLint\u3001Prettier\u3001Husky \u4e00\u7ad9\u5f0f\u914d\u7f6e\u6307\u5357"},c="\u524d\u7aef\u5de5\u7a0b\u5316\u914d\u7f6e",d={},o=[{value:"\ud83c\udfaf \u76ee\u6807",id:"-\u76ee\u6807",level:2},{value:"1. ESLint \u914d\u7f6e",id:"1-eslint-\u914d\u7f6e",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:3},{value:"\u914d\u7f6e\u6587\u4ef6 <code>eslint.config.js</code>",id:"\u914d\u7f6e\u6587\u4ef6-eslintconfigjs",level:3},{value:"React \u9879\u76ee\u914d\u7f6e",id:"react-\u9879\u76ee\u914d\u7f6e",level:3},{value:"\u5e38\u7528\u547d\u4ee4",id:"\u5e38\u7528\u547d\u4ee4",level:3},{value:"2. Prettier \u914d\u7f6e",id:"2-prettier-\u914d\u7f6e",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5-1",level:3},{value:"\u914d\u7f6e\u6587\u4ef6 <code>.prettierrc</code>",id:"\u914d\u7f6e\u6587\u4ef6-prettierrc",level:3},{value:"\u5ffd\u7565\u6587\u4ef6 <code>.prettierignore</code>",id:"\u5ffd\u7565\u6587\u4ef6-prettierignore",level:3},{value:"\u5e38\u7528\u547d\u4ee4",id:"\u5e38\u7528\u547d\u4ee4-1",level:3},{value:"3. ESLint + Prettier \u6574\u5408",id:"3-eslint--prettier-\u6574\u5408",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5-2",level:3},{value:"\u914d\u7f6e",id:"\u914d\u7f6e",level:3},{value:"4. Husky + lint-staged",id:"4-husky--lint-staged",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5-3",level:3},{value:"\u914d\u7f6e <code>.husky/pre-commit</code>",id:"\u914d\u7f6e-huskypre-commit",level:3},{value:"\u914d\u7f6e <code>package.json</code>",id:"\u914d\u7f6e-packagejson",level:3},{value:"\u6dfb\u52a0 commit-msg \u68c0\u67e5\uff08\u53ef\u9009\uff09",id:"\u6dfb\u52a0-commit-msg-\u68c0\u67e5\u53ef\u9009",level:3},{value:"5. VS Code \u914d\u7f6e",id:"5-vs-code-\u914d\u7f6e",level:2},{value:"<code>.vscode/settings.json</code>",id:"vscodesettingsjson",level:3},{value:"<code>.vscode/extensions.json</code>",id:"vscodeextensionsjson",level:3},{value:"6. EditorConfig",id:"6-editorconfig",level:2},{value:"<code>.editorconfig</code>",id:"editorconfig",level:3},{value:"\ud83d\udce6 \u4e00\u952e\u521d\u59cb\u5316\u811a\u672c",id:"-\u4e00\u952e\u521d\u59cb\u5316\u811a\u672c",level:2},{value:"\ud83d\udd27 \u5e38\u89c1\u95ee\u9898",id:"-\u5e38\u89c1\u95ee\u9898",level:2},{value:"Q: ESLint \u548c Prettier \u51b2\u7a81\u600e\u4e48\u529e\uff1f",id:"q-eslint-\u548c-prettier-\u51b2\u7a81\u600e\u4e48\u529e",level:3},{value:"Q: \u4fdd\u5b58\u65f6\u4e0d\u81ea\u52a8\u683c\u5f0f\u5316\uff1f",id:"q-\u4fdd\u5b58\u65f6\u4e0d\u81ea\u52a8\u683c\u5f0f\u5316",level:3},{value:"Q: Husky \u94a9\u5b50\u4e0d\u751f\u6548\uff1f",id:"q-husky-\u94a9\u5b50\u4e0d\u751f\u6548",level:3},{value:"\ud83d\udcda \u63a8\u8350\u8d44\u6e90",id:"-\u63a8\u8350\u8d44\u6e90",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"\u524d\u7aef\u5de5\u7a0b\u5316\u914d\u7f6e",children:"\u524d\u7aef\u5de5\u7a0b\u5316\u914d\u7f6e"})}),"\n",(0,t.jsx)(n.p,{children:"\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u914d\u7f6e ESLint\u3001Prettier \u548c Husky\uff0c\u5b9e\u73b0\u4ee3\u7801\u89c4\u8303\u81ea\u52a8\u5316\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"-\u76ee\u6807",children:"\ud83c\udfaf \u76ee\u6807"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u2705 \u7edf\u4e00\u4ee3\u7801\u98ce\u683c"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 \u81ea\u52a8\u4fee\u590d\u683c\u5f0f\u95ee\u9898"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 \u63d0\u4ea4\u524d\u81ea\u52a8\u68c0\u67e5"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 \u56e2\u961f\u534f\u4f5c\u89c4\u8303\u5316"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"1-eslint-\u914d\u7f6e",children:"1. ESLint \u914d\u7f6e"}),"\n",(0,t.jsx)(n.h3,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install -D eslint @eslint/js typescript-eslint\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"\u914d\u7f6e\u6587\u4ef6-eslintconfigjs",children:["\u914d\u7f6e\u6587\u4ef6 ",(0,t.jsx)(n.code,{children:"eslint.config.js"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"import js from '@eslint/js';\nimport tseslint from 'typescript-eslint';\n\nexport default tseslint.config(\n  js.configs.recommended,\n  ...tseslint.configs.recommended,\n  {\n    rules: {\n      // \u81ea\u5b9a\u4e49\u89c4\u5219\n      'no-console': 'warn',\n      'no-unused-vars': 'off',\n      '@typescript-eslint/no-unused-vars': 'error',\n      '@typescript-eslint/no-explicit-any': 'warn',\n    },\n    ignores: ['node_modules', 'dist', 'build'],\n  }\n);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"react-\u9879\u76ee\u914d\u7f6e",children:"React \u9879\u76ee\u914d\u7f6e"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install -D eslint-plugin-react eslint-plugin-react-hooks\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"import react from 'eslint-plugin-react';\nimport reactHooks from 'eslint-plugin-react-hooks';\n\nexport default [\n  // ... \u5176\u4ed6\u914d\u7f6e\n  {\n    plugins: {\n      react,\n      'react-hooks': reactHooks,\n    },\n    rules: {\n      'react/react-in-jsx-scope': 'off',\n      'react-hooks/rules-of-hooks': 'error',\n      'react-hooks/exhaustive-deps': 'warn',\n    },\n  },\n];\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u5e38\u7528\u547d\u4ee4",children:"\u5e38\u7528\u547d\u4ee4"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "scripts": {\n    "lint": "eslint src",\n    "lint:fix": "eslint src --fix"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"2-prettier-\u914d\u7f6e",children:"2. Prettier \u914d\u7f6e"}),"\n",(0,t.jsx)(n.h3,{id:"\u5b89\u88c5-1",children:"\u5b89\u88c5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install -D prettier\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"\u914d\u7f6e\u6587\u4ef6-prettierrc",children:["\u914d\u7f6e\u6587\u4ef6 ",(0,t.jsx)(n.code,{children:".prettierrc"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "semi": true,\n  "singleQuote": true,\n  "tabWidth": 2,\n  "trailingComma": "es5",\n  "printWidth": 100,\n  "bracketSpacing": true,\n  "arrowParens": "avoid",\n  "endOfLine": "lf"\n}\n'})}),"\n",(0,t.jsxs)(n.h3,{id:"\u5ffd\u7565\u6587\u4ef6-prettierignore",children:["\u5ffd\u7565\u6587\u4ef6 ",(0,t.jsx)(n.code,{children:".prettierignore"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"node_modules\ndist\nbuild\n*.min.js\npackage-lock.json\nyarn.lock\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u5e38\u7528\u547d\u4ee4-1",children:"\u5e38\u7528\u547d\u4ee4"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "scripts": {\n    "format": "prettier --write \\"src/**/*.{js,jsx,ts,tsx,css,json}\\"",\n    "format:check": "prettier --check \\"src/**/*.{js,jsx,ts,tsx,css,json}\\""\n  }\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"3-eslint--prettier-\u6574\u5408",children:"3. ESLint + Prettier \u6574\u5408"}),"\n",(0,t.jsx)(n.h3,{id:"\u5b89\u88c5-2",children:"\u5b89\u88c5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install -D eslint-config-prettier eslint-plugin-prettier\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u914d\u7f6e",children:"\u914d\u7f6e"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// eslint.config.js\nimport prettier from 'eslint-plugin-prettier';\nimport prettierConfig from 'eslint-config-prettier';\n\nexport default [\n  // ... \u5176\u4ed6\u914d\u7f6e\n  prettierConfig,  // \u5173\u95ed\u4e0e Prettier \u51b2\u7a81\u7684\u89c4\u5219\n  {\n    plugins: {\n      prettier,\n    },\n    rules: {\n      'prettier/prettier': 'error',  // Prettier \u95ee\u9898\u4f5c\u4e3a ESLint \u9519\u8bef\n    },\n  },\n];\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"4-husky--lint-staged",children:"4. Husky + lint-staged"}),"\n",(0,t.jsx)(n.h3,{id:"\u5b89\u88c5-3",children:"\u5b89\u88c5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install -D husky lint-staged\nnpx husky init\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"\u914d\u7f6e-huskypre-commit",children:["\u914d\u7f6e ",(0,t.jsx)(n.code,{children:".husky/pre-commit"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npx lint-staged\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"\u914d\u7f6e-packagejson",children:["\u914d\u7f6e ",(0,t.jsx)(n.code,{children:"package.json"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "lint-staged": {\n    "*.{js,jsx,ts,tsx}": [\n      "eslint --fix",\n      "prettier --write"\n    ],\n    "*.{css,scss,json,md}": [\n      "prettier --write"\n    ]\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u6dfb\u52a0-commit-msg-\u68c0\u67e5\u53ef\u9009",children:"\u6dfb\u52a0 commit-msg \u68c0\u67e5\uff08\u53ef\u9009\uff09"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npx husky add .husky/commit-msg 'npx --no -- commitlint --edit \"$1\"'\nnpm install -D @commitlint/cli @commitlint/config-conventional\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// commitlint.config.js\nexport default {\n  extends: ['@commitlint/config-conventional'],\n};\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"5-vs-code-\u914d\u7f6e",children:"5. VS Code \u914d\u7f6e"}),"\n",(0,t.jsx)(n.h3,{id:"vscodesettingsjson",children:(0,t.jsx)(n.code,{children:".vscode/settings.json"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "editor.formatOnSave": true,\n  "editor.defaultFormatter": "esbenp.prettier-vscode",\n  "editor.codeActionsOnSave": {\n    "source.fixAll.eslint": "explicit"\n  },\n  "[javascript]": {\n    "editor.defaultFormatter": "esbenp.prettier-vscode"\n  },\n  "[typescript]": {\n    "editor.defaultFormatter": "esbenp.prettier-vscode"\n  },\n  "[typescriptreact]": {\n    "editor.defaultFormatter": "esbenp.prettier-vscode"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"vscodeextensionsjson",children:(0,t.jsx)(n.code,{children:".vscode/extensions.json"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "recommendations": [\n    "dbaeumer.vscode-eslint",\n    "esbenp.prettier-vscode"\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"6-editorconfig",children:"6. EditorConfig"}),"\n",(0,t.jsx)(n.h3,{id:"editorconfig",children:(0,t.jsx)(n.code,{children:".editorconfig"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",children:"root = true\n\n[*]\ncharset = utf-8\nindent_style = space\nindent_size = 2\nend_of_line = lf\ninsert_final_newline = true\ntrim_trailing_whitespace = true\n\n[*.md]\ntrim_trailing_whitespace = false\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-\u4e00\u952e\u521d\u59cb\u5316\u811a\u672c",children:"\ud83d\udce6 \u4e00\u952e\u521d\u59cb\u5316\u811a\u672c"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n\n# \u5b89\u88c5\u4f9d\u8d56\nnpm install -D eslint @eslint/js typescript-eslint \\\n  prettier eslint-config-prettier eslint-plugin-prettier \\\n  husky lint-staged\n\n# \u521d\u59cb\u5316 Husky\nnpx husky init\necho \'npx lint-staged\' > .husky/pre-commit\n\n# \u521b\u5efa\u914d\u7f6e\u6587\u4ef6\ncat > .prettierrc << \'EOF\'\n{\n  "semi": true,\n  "singleQuote": true,\n  "tabWidth": 2,\n  "trailingComma": "es5",\n  "printWidth": 100\n}\nEOF\n\necho "\u2705 \u5de5\u7a0b\u5316\u914d\u7f6e\u5b8c\u6210\uff01"\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-\u5e38\u89c1\u95ee\u9898",children:"\ud83d\udd27 \u5e38\u89c1\u95ee\u9898"}),"\n",(0,t.jsx)(n.h3,{id:"q-eslint-\u548c-prettier-\u51b2\u7a81\u600e\u4e48\u529e",children:"Q: ESLint \u548c Prettier \u51b2\u7a81\u600e\u4e48\u529e\uff1f"}),"\n",(0,t.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"eslint-config-prettier"})," \u5173\u95ed\u51b2\u7a81\u7684\u89c4\u5219\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"q-\u4fdd\u5b58\u65f6\u4e0d\u81ea\u52a8\u683c\u5f0f\u5316",children:"Q: \u4fdd\u5b58\u65f6\u4e0d\u81ea\u52a8\u683c\u5f0f\u5316\uff1f"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"\u68c0\u67e5 VS Code \u662f\u5426\u5b89\u88c5\u4e86 Prettier \u63d2\u4ef6"}),"\n",(0,t.jsxs)(n.li,{children:["\u68c0\u67e5 ",(0,t.jsx)(n.code,{children:"settings.json"})," \u4e2d ",(0,t.jsx)(n.code,{children:"editor.formatOnSave"})," \u662f\u5426\u4e3a ",(0,t.jsx)(n.code,{children:"true"})]}),"\n",(0,t.jsxs)(n.li,{children:["\u68c0\u67e5\u662f\u5426\u6709 ",(0,t.jsx)(n.code,{children:".prettierignore"})," \u5ffd\u7565\u4e86\u8be5\u6587\u4ef6"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"q-husky-\u94a9\u5b50\u4e0d\u751f\u6548",children:"Q: Husky \u94a9\u5b50\u4e0d\u751f\u6548\uff1f"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u91cd\u65b0\u5b89\u88c5\u94a9\u5b50\nrm -rf .husky\nnpx husky init\necho 'npx lint-staged' > .husky/pre-commit\nchmod +x .husky/pre-commit\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-\u63a8\u8350\u8d44\u6e90",children:"\ud83d\udcda \u63a8\u8350\u8d44\u6e90"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://eslint.org/",children:"ESLint \u5b98\u65b9\u6587\u6863"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://prettier.io/",children:"Prettier \u5b98\u65b9\u6587\u6863"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://typicode.github.io/husky/",children:"Husky \u5b98\u65b9\u6587\u6863"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>c});var s=i(6540);const t={},r=s.createContext(t);function l(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);