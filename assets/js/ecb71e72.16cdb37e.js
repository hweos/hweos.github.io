"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6307],{6015:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>l,default:()=>d,frontMatter:()=>c,metadata:()=>s,toc:()=>i});const s=JSON.parse('{"id":"frontend/react-hooks","title":"React Hooks \u8be6\u89e3","description":"Hooks \u662f React 16.8 \u5f15\u5165\u7684\u7279\u6027\uff0c\u8ba9\u51fd\u6570\u7ec4\u4ef6\u4e5f\u80fd\u4f7f\u7528\u72b6\u6001\u548c\u751f\u547d\u5468\u671f\u3002","source":"@site/docs/frontend/react-hooks.md","sourceDirName":"frontend","slug":"/frontend/react-hooks","permalink":"/docs/frontend/react-hooks","draft":false,"unlisted":false,"editUrl":"https://github.com/hweos/git-pages/edit/main/docs/frontend/react-hooks.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"JavaScript \u6838\u5fc3\u6982\u5ff5","permalink":"/docs/frontend/javascript-core"},"next":{"title":"React \u7ec4\u4ef6\u8bbe\u8ba1\u6a21\u5f0f","permalink":"/docs/frontend/react-patterns"}}');var r=t(4848),o=t(8453);const c={},l="React Hooks \u8be6\u89e3",u={},i=[{value:"\u57fa\u7840 Hooks",id:"\u57fa\u7840-hooks",level:2},{value:"useState",id:"usestate",level:3},{value:"useEffect",id:"useeffect",level:3},{value:"\u4f9d\u8d56\u6570\u7ec4\u89c4\u5219",id:"\u4f9d\u8d56\u6570\u7ec4\u89c4\u5219",level:4},{value:"useContext",id:"usecontext",level:3},{value:"\u6027\u80fd\u4f18\u5316 Hooks",id:"\u6027\u80fd\u4f18\u5316-hooks",level:2},{value:"useMemo",id:"usememo",level:3},{value:"useCallback",id:"usecallback",level:3},{value:"useRef",id:"useref",level:3},{value:"\u9ad8\u7ea7 Hooks",id:"\u9ad8\u7ea7-hooks",level:2},{value:"useReducer",id:"usereducer",level:3},{value:"useImperativeHandle",id:"useimperativehandle",level:3},{value:"useLayoutEffect",id:"uselayouteffect",level:3},{value:"\u81ea\u5b9a\u4e49 Hooks",id:"\u81ea\u5b9a\u4e49-hooks",level:2},{value:"useLocalStorage",id:"uselocalstorage",level:3},{value:"useDebounce",id:"usedebounce",level:3},{value:"useFetch",id:"usefetch",level:3},{value:"useOnClickOutside",id:"useonclickoutside",level:3},{value:"Hooks \u89c4\u5219",id:"hooks-\u89c4\u5219",level:2},{value:"\u4e24\u6761\u6838\u5fc3\u89c4\u5219",id:"\u4e24\u6761\u6838\u5fc3\u89c4\u5219",level:3},{value:"ESLint \u63d2\u4ef6",id:"eslint-\u63d2\u4ef6",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function a(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"react-hooks-\u8be6\u89e3",children:"React Hooks \u8be6\u89e3"})}),"\n",(0,r.jsx)(n.p,{children:"Hooks \u662f React 16.8 \u5f15\u5165\u7684\u7279\u6027\uff0c\u8ba9\u51fd\u6570\u7ec4\u4ef6\u4e5f\u80fd\u4f7f\u7528\u72b6\u6001\u548c\u751f\u547d\u5468\u671f\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u57fa\u7840-hooks",children:"\u57fa\u7840 Hooks"}),"\n",(0,r.jsx)(n.h3,{id:"usestate",children:"useState"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { useState } from 'react';\n\nfunction Counter() {\n  // \u57fa\u672c\u7528\u6cd5\n  const [count, setCount] = useState(0);\n  \n  // \u51fd\u6570\u5f0f\u66f4\u65b0 - \u57fa\u4e8e\u524d\u4e00\u4e2a\u72b6\u6001\n  const increment = () => setCount(prev => prev + 1);\n  \n  // \u60f0\u6027\u521d\u59cb\u5316 - \u53ea\u5728\u9996\u6b21\u6e32\u67d3\u6267\u884c\n  const [data, setData] = useState(() => {\n    return expensiveComputation();\n  });\n  \n  return (\n    <button onClick={increment}>Count: {count}</button>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"\u6ce8\u610f\u4e8b\u9879",type:"warning",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"setState"})," \u662f\u5f02\u6b65\u7684\uff0c\u4e0d\u4f1a\u7acb\u5373\u66f4\u65b0"]}),"\n",(0,r.jsx)(n.li,{children:"\u5bf9\u8c61/\u6570\u7ec4\u9700\u8981\u8fd4\u56de\u65b0\u5f15\u7528\u624d\u4f1a\u89e6\u53d1\u91cd\u6e32\u67d3"}),"\n",(0,r.jsx)(n.li,{children:"\u51fd\u6570\u5f0f\u66f4\u65b0\u9002\u7528\u4e8e\u4f9d\u8d56\u524d\u4e00\u4e2a\u72b6\u6001\u7684\u573a\u666f"}),"\n"]})}),"\n",(0,r.jsx)(n.h3,{id:"useeffect",children:"useEffect"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { useState, useEffect } from 'react';\n\nfunction UserProfile({ userId }: { userId: string }) {\n  const [user, setUser] = useState(null);\n  \n  useEffect(() => {\n    // \u526f\u4f5c\u7528\uff1a\u6570\u636e\u83b7\u53d6\n    let cancelled = false;\n    \n    async function fetchUser() {\n      const response = await fetch(`/api/users/${userId}`);\n      const data = await response.json();\n      if (!cancelled) {\n        setUser(data);\n      }\n    }\n    \n    fetchUser();\n    \n    // \u6e05\u7406\u51fd\u6570\n    return () => {\n      cancelled = true;\n    };\n  }, [userId]); // \u4f9d\u8d56\u6570\u7ec4\n  \n  return <div>{user?.name}</div>;\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"\u4f9d\u8d56\u6570\u7ec4\u89c4\u5219",children:"\u4f9d\u8d56\u6570\u7ec4\u89c4\u5219"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// \u6bcf\u6b21\u6e32\u67d3\u90fd\u6267\u884c\nuseEffect(() => {\n  console.log('\u6bcf\u6b21\u6e32\u67d3');\n});\n\n// \u4ec5\u6302\u8f7d\u65f6\u6267\u884c\nuseEffect(() => {\n  console.log('\u6302\u8f7d');\n  return () => console.log('\u5378\u8f7d');\n}, []);\n\n// \u4f9d\u8d56\u53d8\u5316\u65f6\u6267\u884c\nuseEffect(() => {\n  console.log('userId \u53d8\u5316');\n}, [userId]);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"usecontext",children:"useContext"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { createContext, useContext, useState } from 'react';\n\n// 1. \u521b\u5efa Context\ninterface ThemeContextType {\n  theme: 'light' | 'dark';\n  toggleTheme: () => void;\n}\n\nconst ThemeContext = createContext<ThemeContextType | null>(null);\n\n// 2. \u521b\u5efa Provider\nfunction ThemeProvider({ children }: { children: React.ReactNode }) {\n  const [theme, setTheme] = useState<'light' | 'dark'>('light');\n  \n  const toggleTheme = () => {\n    setTheme(prev => prev === 'light' ? 'dark' : 'light');\n  };\n  \n  return (\n    <ThemeContext.Provider value={{ theme, toggleTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n\n// 3. \u81ea\u5b9a\u4e49 Hook (\u63a8\u8350)\nfunction useTheme() {\n  const context = useContext(ThemeContext);\n  if (!context) {\n    throw new Error('useTheme must be used within ThemeProvider');\n  }\n  return context;\n}\n\n// 4. \u4f7f\u7528\nfunction ThemedButton() {\n  const { theme, toggleTheme } = useTheme();\n  return (\n    <button \n      onClick={toggleTheme}\n      style={{ background: theme === 'dark' ? '#333' : '#fff' }}\n    >\n      Toggle Theme\n    </button>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u6027\u80fd\u4f18\u5316-hooks",children:"\u6027\u80fd\u4f18\u5316 Hooks"}),"\n",(0,r.jsx)(n.h3,{id:"usememo",children:"useMemo"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { useMemo } from 'react';\n\nfunction ExpensiveList({ items, filter }: { items: Item[]; filter: string }) {\n  // \u4ec5\u5f53 items \u6216 filter \u53d8\u5316\u65f6\u91cd\u65b0\u8ba1\u7b97\n  const filteredItems = useMemo(() => {\n    console.log('\u8ba1\u7b97\u8fc7\u6ee4\u7ed3\u679c');\n    return items.filter(item => \n      item.name.toLowerCase().includes(filter.toLowerCase())\n    );\n  }, [items, filter]);\n  \n  // \u7f13\u5b58\u590d\u6742\u5bf9\u8c61\uff0c\u907f\u514d\u5b50\u7ec4\u4ef6\u4e0d\u5fc5\u8981\u7684\u91cd\u6e32\u67d3\n  const config = useMemo(() => ({\n    pageSize: 10,\n    showHeader: true,\n  }), []);\n  \n  return (\n    <ul>\n      {filteredItems.map(item => (\n        <li key={item.id}>{item.name}</li>\n      ))}\n    </ul>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"usecallback",children:"useCallback"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { useCallback, useState, memo } from 'react';\n\n// \u5b50\u7ec4\u4ef6\u4f7f\u7528 memo \u5305\u88f9\nconst Button = memo(function Button({ \n  onClick, \n  children \n}: { \n  onClick: () => void; \n  children: React.ReactNode;\n}) {\n  console.log('Button rendered');\n  return <button onClick={onClick}>{children}</button>;\n});\n\nfunction Parent() {\n  const [count, setCount] = useState(0);\n  const [text, setText] = useState('');\n  \n  // \u4e0d\u4f7f\u7528 useCallback - \u6bcf\u6b21\u90fd\u521b\u5efa\u65b0\u51fd\u6570\n  // const handleClick = () => setCount(c => c + 1);\n  \n  // \u4f7f\u7528 useCallback - \u51fd\u6570\u5f15\u7528\u7a33\u5b9a\n  const handleClick = useCallback(() => {\n    setCount(c => c + 1);\n  }, []);\n  \n  return (\n    <>\n      <input value={text} onChange={e => setText(e.target.value)} />\n      <Button onClick={handleClick}>Count: {count}</Button>\n    </>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"\u4f55\u65f6\u4f7f\u7528",type:"tip",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"useMemo"}),": \u8ba1\u7b97\u7ed3\u679c\u4f5c\u4e3a props \u4f20\u9012\uff0c\u6216\u8ba1\u7b97\u6210\u672c\u9ad8"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"useCallback"}),": \u51fd\u6570\u4f5c\u4e3a props \u4f20\u9012\u7ed9 ",(0,r.jsx)(n.code,{children:"memo"})," \u5305\u88f9\u7684\u5b50\u7ec4\u4ef6"]}),"\n",(0,r.jsx)(n.li,{children:"\u4e0d\u8981\u8fc7\u5ea6\u4f18\u5316\uff0c\u5148\u786e\u8ba4\u6709\u6027\u80fd\u95ee\u9898\u518d\u4f7f\u7528"}),"\n"]})}),"\n",(0,r.jsx)(n.h3,{id:"useref",children:"useRef"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { useRef, useEffect } from 'react';\n\nfunction TextInput() {\n  // 1. \u8bbf\u95ee DOM \u5143\u7d20\n  const inputRef = useRef<HTMLInputElement>(null);\n  \n  useEffect(() => {\n    inputRef.current?.focus();\n  }, []);\n  \n  // 2. \u5b58\u50a8\u53ef\u53d8\u503c\uff08\u4e0d\u89e6\u53d1\u91cd\u6e32\u67d3\uff09\n  const renderCount = useRef(0);\n  renderCount.current += 1;\n  \n  // 3. \u4fdd\u5b58\u524d\u4e00\u4e2a\u503c\n  const prevValueRef = useRef<string>();\n  const [value, setValue] = useState('');\n  \n  useEffect(() => {\n    prevValueRef.current = value;\n  }, [value]);\n  \n  return (\n    <>\n      <input ref={inputRef} value={value} onChange={e => setValue(e.target.value)} />\n      <p>Previous: {prevValueRef.current}</p>\n      <p>Render count: {renderCount.current}</p>\n    </>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u9ad8\u7ea7-hooks",children:"\u9ad8\u7ea7 Hooks"}),"\n",(0,r.jsx)(n.h3,{id:"usereducer",children:"useReducer"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { useReducer } from 'react';\n\ninterface State {\n  count: number;\n  step: number;\n}\n\ntype Action = \n  | { type: 'increment' }\n  | { type: 'decrement' }\n  | { type: 'setStep'; payload: number }\n  | { type: 'reset' };\n\nconst initialState: State = { count: 0, step: 1 };\n\nfunction reducer(state: State, action: Action): State {\n  switch (action.type) {\n    case 'increment':\n      return { ...state, count: state.count + state.step };\n    case 'decrement':\n      return { ...state, count: state.count - state.step };\n    case 'setStep':\n      return { ...state, step: action.payload };\n    case 'reset':\n      return initialState;\n    default:\n      return state;\n  }\n}\n\nfunction Counter() {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  \n  return (\n    <div>\n      <p>Count: {state.count}</p>\n      <input \n        type=\"number\" \n        value={state.step}\n        onChange={e => dispatch({ type: 'setStep', payload: Number(e.target.value) })}\n      />\n      <button onClick={() => dispatch({ type: 'increment' })}>+</button>\n      <button onClick={() => dispatch({ type: 'decrement' })}>-</button>\n      <button onClick={() => dispatch({ type: 'reset' })}>Reset</button>\n    </div>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"useimperativehandle",children:"useImperativeHandle"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { useRef, useImperativeHandle, forwardRef } from 'react';\n\ninterface InputHandle {\n  focus: () => void;\n  clear: () => void;\n  getValue: () => string;\n}\n\nconst FancyInput = forwardRef<InputHandle, { placeholder?: string }>(\n  function FancyInput(props, ref) {\n    const inputRef = useRef<HTMLInputElement>(null);\n    \n    useImperativeHandle(ref, () => ({\n      focus() {\n        inputRef.current?.focus();\n      },\n      clear() {\n        if (inputRef.current) {\n          inputRef.current.value = '';\n        }\n      },\n      getValue() {\n        return inputRef.current?.value ?? '';\n      }\n    }), []);\n    \n    return <input ref={inputRef} placeholder={props.placeholder} />;\n  }\n);\n\n// \u4f7f\u7528\nfunction Parent() {\n  const inputRef = useRef<InputHandle>(null);\n  \n  return (\n    <>\n      <FancyInput ref={inputRef} placeholder=\"Enter text\" />\n      <button onClick={() => inputRef.current?.focus()}>Focus</button>\n      <button onClick={() => inputRef.current?.clear()}>Clear</button>\n    </>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"uselayouteffect",children:"useLayoutEffect"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { useLayoutEffect, useRef, useState } from 'react';\n\nfunction Tooltip({ text }: { text: string }) {\n  const ref = useRef<HTMLDivElement>(null);\n  const [position, setPosition] = useState({ top: 0, left: 0 });\n  \n  // \u5728 DOM \u66f4\u65b0\u540e\u3001\u6d4f\u89c8\u5668\u7ed8\u5236\u524d\u540c\u6b65\u6267\u884c\n  // \u9002\u7528\u4e8e\u9700\u8981\u5728\u7ed8\u5236\u524d\u8bfb\u53d6/\u4fee\u6539 DOM \u7684\u573a\u666f\n  useLayoutEffect(() => {\n    if (ref.current) {\n      const rect = ref.current.getBoundingClientRect();\n      setPosition({\n        top: rect.bottom + 10,\n        left: rect.left + rect.width / 2,\n      });\n    }\n  }, []);\n  \n  return (\n    <div ref={ref}>\n      Hover me\n      <div style={{ position: 'absolute', ...position }}>{text}</div>\n    </div>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"useEffect vs useLayoutEffect",type:"warning",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"useEffect"}),": \u5f02\u6b65\u6267\u884c\uff0c\u4e0d\u963b\u585e\u7ed8\u5236\uff08\u5927\u591a\u6570\u60c5\u51b5\u4f7f\u7528\uff09"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"useLayoutEffect"}),": \u540c\u6b65\u6267\u884c\uff0c\u963b\u585e\u7ed8\u5236\uff08\u6d4b\u91cf DOM\u3001\u9632\u6b62\u95ea\u70c1\uff09"]}),"\n"]})}),"\n",(0,r.jsx)(n.h2,{id:"\u81ea\u5b9a\u4e49-hooks",children:"\u81ea\u5b9a\u4e49 Hooks"}),"\n",(0,r.jsx)(n.h3,{id:"uselocalstorage",children:"useLocalStorage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { useState, useEffect } from 'react';\n\nfunction useLocalStorage<T>(key: string, initialValue: T) {\n  const [storedValue, setStoredValue] = useState<T>(() => {\n    try {\n      const item = window.localStorage.getItem(key);\n      return item ? JSON.parse(item) : initialValue;\n    } catch {\n      return initialValue;\n    }\n  });\n  \n  useEffect(() => {\n    try {\n      window.localStorage.setItem(key, JSON.stringify(storedValue));\n    } catch (error) {\n      console.error('Failed to save to localStorage:', error);\n    }\n  }, [key, storedValue]);\n  \n  return [storedValue, setStoredValue] as const;\n}\n\n// \u4f7f\u7528\nfunction Settings() {\n  const [theme, setTheme] = useLocalStorage('theme', 'light');\n  return (\n    <button onClick={() => setTheme(t => t === 'light' ? 'dark' : 'light')}>\n      Theme: {theme}\n    </button>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"usedebounce",children:"useDebounce"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { useState, useEffect } from 'react';\n\nfunction useDebounce<T>(value: T, delay: number): T {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  \n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n    \n    return () => clearTimeout(timer);\n  }, [value, delay]);\n  \n  return debouncedValue;\n}\n\n// \u4f7f\u7528\nfunction Search() {\n  const [query, setQuery] = useState('');\n  const debouncedQuery = useDebounce(query, 300);\n  \n  useEffect(() => {\n    if (debouncedQuery) {\n      // \u6267\u884c\u641c\u7d22\n      console.log('Searching:', debouncedQuery);\n    }\n  }, [debouncedQuery]);\n  \n  return (\n    <input \n      value={query} \n      onChange={e => setQuery(e.target.value)}\n      placeholder=\"Search...\"\n    />\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"usefetch",children:"useFetch"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { useState, useEffect } from 'react';\n\ninterface UseFetchResult<T> {\n  data: T | null;\n  loading: boolean;\n  error: Error | null;\n  refetch: () => void;\n}\n\nfunction useFetch<T>(url: string): UseFetchResult<T> {\n  const [data, setData] = useState<T | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n  const [trigger, setTrigger] = useState(0);\n  \n  useEffect(() => {\n    let cancelled = false;\n    setLoading(true);\n    setError(null);\n    \n    fetch(url)\n      .then(res => {\n        if (!res.ok) throw new Error(`HTTP ${res.status}`);\n        return res.json();\n      })\n      .then(data => {\n        if (!cancelled) {\n          setData(data);\n          setLoading(false);\n        }\n      })\n      .catch(err => {\n        if (!cancelled) {\n          setError(err);\n          setLoading(false);\n        }\n      });\n    \n    return () => { cancelled = true; };\n  }, [url, trigger]);\n  \n  const refetch = () => setTrigger(t => t + 1);\n  \n  return { data, loading, error, refetch };\n}\n\n// \u4f7f\u7528\nfunction UserList() {\n  const { data, loading, error, refetch } = useFetch<User[]>('/api/users');\n  \n  if (loading) return <div>Loading...</div>;\n  if (error) return <div>Error: {error.message}</div>;\n  \n  return (\n    <>\n      <button onClick={refetch}>Refresh</button>\n      <ul>\n        {data?.map(user => <li key={user.id}>{user.name}</li>)}\n      </ul>\n    </>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"useonclickoutside",children:"useOnClickOutside"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { useEffect, RefObject } from 'react';\n\nfunction useOnClickOutside(\n  ref: RefObject<HTMLElement>,\n  handler: (event: MouseEvent | TouchEvent) => void\n) {\n  useEffect(() => {\n    const listener = (event: MouseEvent | TouchEvent) => {\n      if (!ref.current || ref.current.contains(event.target as Node)) {\n        return;\n      }\n      handler(event);\n    };\n    \n    document.addEventListener('mousedown', listener);\n    document.addEventListener('touchstart', listener);\n    \n    return () => {\n      document.removeEventListener('mousedown', listener);\n      document.removeEventListener('touchstart', listener);\n    };\n  }, [ref, handler]);\n}\n\n// \u4f7f\u7528\nfunction Dropdown() {\n  const [isOpen, setIsOpen] = useState(false);\n  const ref = useRef<HTMLDivElement>(null);\n  \n  useOnClickOutside(ref, () => setIsOpen(false));\n  \n  return (\n    <div ref={ref}>\n      <button onClick={() => setIsOpen(!isOpen)}>Toggle</button>\n      {isOpen && <div>Dropdown content</div>}\n    </div>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"hooks-\u89c4\u5219",children:"Hooks \u89c4\u5219"}),"\n",(0,r.jsx)(n.h3,{id:"\u4e24\u6761\u6838\u5fc3\u89c4\u5219",children:"\u4e24\u6761\u6838\u5fc3\u89c4\u5219"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u53ea\u5728\u9876\u5c42\u8c03\u7528 Hooks"})," - \u4e0d\u5728\u5faa\u73af\u3001\u6761\u4ef6\u3001\u5d4c\u5957\u51fd\u6570\u4e2d\u8c03\u7528"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"\u53ea\u5728 React \u51fd\u6570\u7ec4\u4ef6/\u81ea\u5b9a\u4e49 Hook \u4e2d\u8c03\u7528"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// \u274c \u9519\u8bef\uff1a\u6761\u4ef6\u8bed\u53e5\u4e2d\u8c03\u7528\nfunction Bad({ condition }) {\n  if (condition) {\n    const [state, setState] = useState(0); // \u9519\u8bef\uff01\n  }\n}\n\n// \u2705 \u6b63\u786e\uff1a\u9876\u5c42\u8c03\u7528\nfunction Good({ condition }) {\n  const [state, setState] = useState(0);\n  \n  if (condition) {\n    // \u5728\u8fd9\u91cc\u4f7f\u7528 state\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"eslint-\u63d2\u4ef6",children:"ESLint \u63d2\u4ef6"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install eslint-plugin-react-hooks --save-dev\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "plugins": ["react-hooks"],\n  "rules": {\n    "react-hooks/rules-of-hooks": "error",\n    "react-hooks/exhaustive-deps": "warn"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Hook"}),(0,r.jsx)(n.th,{children:"\u7528\u9014"}),(0,r.jsx)(n.th,{children:"\u4f7f\u7528\u573a\u666f"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"useState"}),(0,r.jsx)(n.td,{children:"\u72b6\u6001\u7ba1\u7406"}),(0,r.jsx)(n.td,{children:"\u7b80\u5355\u72b6\u6001"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"useEffect"}),(0,r.jsx)(n.td,{children:"\u526f\u4f5c\u7528"}),(0,r.jsx)(n.td,{children:"\u6570\u636e\u83b7\u53d6\u3001\u8ba2\u9605\u3001DOM \u64cd\u4f5c"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"useContext"}),(0,r.jsx)(n.td,{children:"\u8de8\u5c42\u7ea7\u901a\u4fe1"}),(0,r.jsx)(n.td,{children:"\u4e3b\u9898\u3001\u7528\u6237\u4fe1\u606f\u3001\u8bed\u8a00"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"useMemo"}),(0,r.jsx)(n.td,{children:"\u7f13\u5b58\u8ba1\u7b97\u7ed3\u679c"}),(0,r.jsx)(n.td,{children:"\u6602\u8d35\u8ba1\u7b97\u3001\u5f15\u7528\u7a33\u5b9a"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"useCallback"}),(0,r.jsx)(n.td,{children:"\u7f13\u5b58\u51fd\u6570"}),(0,r.jsx)(n.td,{children:"\u4f20\u9012\u7ed9 memo \u7ec4\u4ef6\u7684\u56de\u8c03"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"useRef"}),(0,r.jsx)(n.td,{children:"\u53ef\u53d8\u5f15\u7528"}),(0,r.jsx)(n.td,{children:"DOM \u5f15\u7528\u3001\u4fdd\u5b58\u53ef\u53d8\u503c"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"useReducer"}),(0,r.jsx)(n.td,{children:"\u590d\u6742\u72b6\u6001"}),(0,r.jsx)(n.td,{children:"\u591a\u4e2a\u5173\u8054\u72b6\u6001\u3001\u590d\u6742\u66f4\u65b0\u903b\u8f91"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"useLayoutEffect"}),(0,r.jsx)(n.td,{children:"\u540c\u6b65\u526f\u4f5c\u7528"}),(0,r.jsx)(n.td,{children:"DOM \u6d4b\u91cf\u3001\u9632\u6b62\u95ea\u70c1"})]})]})]})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>l});var s=t(6540);const r={},o=s.createContext(r);function c(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);