"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1123],{78:n=>{n.exports=JSON.parse('{"permalink":"/blog/monorepo-guide","editUrl":"https://github.com/hweos/git-pages/edit/main/blog/2024-09-01-monorepo.md","source":"@site/blog/2024-09-01-monorepo.md","title":"Monorepo \u5b9e\u8df5\u6307\u5357","description":"Monorepo \u5c06\u591a\u4e2a\u9879\u76ee\u653e\u5728\u4e00\u4e2a\u4ed3\u5e93\u7ba1\u7406\uff0c\u4fbf\u4e8e\u4ee3\u7801\u5171\u4eab\u548c\u7edf\u4e00\u5de5\u5177\u94fe\u3002\u672c\u6587\u4ecb\u7ecd Monorepo \u7684\u642d\u5efa\u548c\u6700\u4f73\u5b9e\u8df5\u3002","date":"2024-09-01T00:00:00.000Z","tags":[{"inline":true,"label":"Monorepo","permalink":"/blog/tags/monorepo"},{"inline":true,"label":"pnpm","permalink":"/blog/tags/pnpm"},{"inline":true,"label":"Turborepo","permalink":"/blog/tags/turborepo"},{"inline":true,"label":"\u5de5\u7a0b\u5316","permalink":"/blog/tags/\u5de5\u7a0b\u5316"}],"readingTime":3.76,"hasTruncateMarker":true,"authors":[{"name":"Mason","title":"Full Stack Developer","url":"https://github.com/HuangZhe007","socials":{"github":"https://github.com/HuangZhe007"},"imageURL":"https://avatars.githubusercontent.com/u/45168628?v=4","key":"mason","page":null}],"frontMatter":{"slug":"monorepo-guide","title":"Monorepo \u5b9e\u8df5\u6307\u5357","authors":"mason","tags":["Monorepo","pnpm","Turborepo","\u5de5\u7a0b\u5316"]},"unlisted":false,"prevItem":{"title":"WebSocket \u5b9e\u65f6\u901a\u4fe1\u6307\u5357","permalink":"/blog/websocket-guide"},"nextItem":{"title":"React \u72b6\u6001\u7ba1\u7406\u65b9\u6848\u5bf9\u6bd4","permalink":"/blog/state-management"}}')},4962:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>t,metadata:()=>r,toc:()=>c});var r=s(78),l=s(4848),i=s(8453);const t={slug:"monorepo-guide",title:"Monorepo \u5b9e\u8df5\u6307\u5357",authors:"mason",tags:["Monorepo","pnpm","Turborepo","\u5de5\u7a0b\u5316"]},o=void 0,a={authorsImageUrls:[void 0]},c=[{value:"\ud83c\udfaf \u4ec0\u4e48\u662f Monorepo",id:"-\u4ec0\u4e48\u662f-monorepo",level:2},{value:"\u4f18\u7f3a\u70b9",id:"\u4f18\u7f3a\u70b9",level:3},{value:"\ud83d\udee0\ufe0f \u5de5\u5177\u9009\u62e9",id:"\ufe0f-\u5de5\u5177\u9009\u62e9",level:2},{value:"\ud83d\udcc2 \u9879\u76ee\u7ed3\u6784",id:"-\u9879\u76ee\u7ed3\u6784",level:2},{value:"\ud83d\ude80 \u642d\u5efa\u6b65\u9aa4",id:"-\u642d\u5efa\u6b65\u9aa4",level:2},{value:"1. \u521d\u59cb\u5316\u9879\u76ee",id:"1-\u521d\u59cb\u5316\u9879\u76ee",level:3},{value:"2. \u914d\u7f6e pnpm workspace",id:"2-\u914d\u7f6e-pnpm-workspace",level:3},{value:"3. \u6839\u76ee\u5f55 package.json",id:"3-\u6839\u76ee\u5f55-packagejson",level:3},{value:"4. \u914d\u7f6e Turborepo",id:"4-\u914d\u7f6e-turborepo",level:3},{value:"\ud83d\udce6 \u521b\u5efa\u5171\u4eab\u5305",id:"-\u521b\u5efa\u5171\u4eab\u5305",level:2},{value:"packages/ui/package.json",id:"packagesuipackagejson",level:3},{value:"packages/ui/src/button.tsx",id:"packagesuisrcbuttontsx",level:3},{value:"packages/ui/src/index.ts",id:"packagesuisrcindexts",level:3},{value:"\ud83d\udd17 \u5305\u4e4b\u95f4\u7684\u4f9d\u8d56",id:"-\u5305\u4e4b\u95f4\u7684\u4f9d\u8d56",level:2},{value:"\u5728\u5e94\u7528\u4e2d\u4f7f\u7528\u5171\u4eab\u5305",id:"\u5728\u5e94\u7528\u4e2d\u4f7f\u7528\u5171\u4eab\u5305",level:3},{value:"\u5b89\u88c5\u4f9d\u8d56",id:"\u5b89\u88c5\u4f9d\u8d56",level:3},{value:"\u2699\ufe0f \u5171\u4eab\u914d\u7f6e",id:"\ufe0f-\u5171\u4eab\u914d\u7f6e",level:2},{value:"packages/config/tsconfig/base.json",id:"packagesconfigtsconfigbasejson",level:3},{value:"\u5728\u5305\u4e2d\u4f7f\u7528",id:"\u5728\u5305\u4e2d\u4f7f\u7528",level:3},{value:"\ud83c\udfc3 \u8fd0\u884c\u547d\u4ee4",id:"-\u8fd0\u884c\u547d\u4ee4",level:2},{value:"\u5f00\u53d1",id:"\u5f00\u53d1",level:3},{value:"\u6784\u5efa",id:"\u6784\u5efa",level:3},{value:"\u7f13\u5b58",id:"\u7f13\u5b58",level:3},{value:"\ud83d\udccb \u7248\u672c\u7ba1\u7406",id:"-\u7248\u672c\u7ba1\u7406",level:2},{value:"\u4f7f\u7528 Changesets",id:"\u4f7f\u7528-changesets",level:3},{value:"\u6dfb\u52a0\u53d8\u66f4",id:"\u6dfb\u52a0\u53d8\u66f4",level:3},{value:"\u53d1\u5e03",id:"\u53d1\u5e03",level:3},{value:"\ud83d\udd27 \u5e38\u89c1\u95ee\u9898",id:"-\u5e38\u89c1\u95ee\u9898",level:2},{value:"1. \u4f9d\u8d56\u63d0\u5347",id:"1-\u4f9d\u8d56\u63d0\u5347",level:3},{value:"2. \u7c7b\u578b\u5f15\u7528",id:"2-\u7c7b\u578b\u5f15\u7528",level:3},{value:"3. \u6784\u5efa\u987a\u5e8f",id:"3-\u6784\u5efa\u987a\u5e8f",level:3},{value:"\u2705 \u6700\u4f73\u5b9e\u8df5",id:"-\u6700\u4f73\u5b9e\u8df5",level:2},{value:"\ud83d\udcda \u63a8\u8350\u8d44\u6e90",id:"-\u63a8\u8350\u8d44\u6e90",level:2}];function d(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.p,{children:"Monorepo \u5c06\u591a\u4e2a\u9879\u76ee\u653e\u5728\u4e00\u4e2a\u4ed3\u5e93\u7ba1\u7406\uff0c\u4fbf\u4e8e\u4ee3\u7801\u5171\u4eab\u548c\u7edf\u4e00\u5de5\u5177\u94fe\u3002\u672c\u6587\u4ecb\u7ecd Monorepo \u7684\u642d\u5efa\u548c\u6700\u4f73\u5b9e\u8df5\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"-\u4ec0\u4e48\u662f-monorepo",children:"\ud83c\udfaf \u4ec0\u4e48\u662f Monorepo"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"Monorepo\uff1a\u591a\u4e2a\u9879\u76ee\u5728\u4e00\u4e2a Git \u4ed3\u5e93\u4e2d\nPolyrepo\uff1a\u6bcf\u4e2a\u9879\u76ee\u4e00\u4e2a\u72ec\u7acb\u4ed3\u5e93\n\nMonorepo \u4e0d\u7b49\u4e8e Monolith\uff08\u5355\u4f53\u5e94\u7528\uff09\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u4f18\u7f3a\u70b9",children:"\u4f18\u7f3a\u70b9"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u4f18\u70b9"}),(0,l.jsx)(e.th,{children:"\u7f3a\u70b9"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u4ee3\u7801\u590d\u7528\u7b80\u5355"}),(0,l.jsx)(e.td,{children:"\u4ed3\u5e93\u4f53\u79ef\u5927"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u7edf\u4e00\u5de5\u5177\u94fe"}),(0,l.jsx)(e.td,{children:"\u6743\u9650\u7ba1\u7406\u590d\u6742"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u539f\u5b50\u5316\u63d0\u4ea4"}),(0,l.jsx)(e.td,{children:"CI/CD \u9700\u8981\u4f18\u5316"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u4f9d\u8d56\u7ba1\u7406\u7edf\u4e00"}),(0,l.jsx)(e.td,{children:"\u5b66\u4e60\u6210\u672c"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u91cd\u6784\u66f4\u65b9\u4fbf"}),(0,l.jsx)(e.td,{})]})]})]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"\ufe0f-\u5de5\u5177\u9009\u62e9",children:"\ud83d\udee0\ufe0f \u5de5\u5177\u9009\u62e9"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u5de5\u5177"}),(0,l.jsx)(e.th,{children:"\u5305\u7ba1\u7406"}),(0,l.jsx)(e.th,{children:"\u6784\u5efa\u7f13\u5b58"}),(0,l.jsx)(e.th,{children:"\u4efb\u52a1\u7f16\u6392"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"pnpm workspace"}),(0,l.jsx)(e.td,{children:"\u2705"}),(0,l.jsx)(e.td,{children:"\u274c"}),(0,l.jsx)(e.td,{children:"\u274c"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Turborepo"}),(0,l.jsx)(e.td,{children:"\u274c"}),(0,l.jsx)(e.td,{children:"\u2705"}),(0,l.jsx)(e.td,{children:"\u2705"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Nx"}),(0,l.jsx)(e.td,{children:"\u274c"}),(0,l.jsx)(e.td,{children:"\u2705"}),(0,l.jsx)(e.td,{children:"\u2705"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Lerna"}),(0,l.jsx)(e.td,{children:"\u2705"}),(0,l.jsx)(e.td,{children:"\u274c"}),(0,l.jsx)(e.td,{children:"\u2705"})]})]})]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u63a8\u8350\u7ec4\u5408"}),"\uff1apnpm + Turborepo"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"-\u9879\u76ee\u7ed3\u6784",children:"\ud83d\udcc2 \u9879\u76ee\u7ed3\u6784"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"my-monorepo/\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 pnpm-workspace.yaml\n\u251c\u2500\u2500 turbo.json\n\u251c\u2500\u2500 apps/\n\u2502   \u251c\u2500\u2500 web/                 # Next.js \u5e94\u7528\n\u2502   \u2502   \u251c\u2500\u2500 package.json\n\u2502   \u2502   \u2514\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 admin/               # \u7ba1\u7406\u540e\u53f0\n\u2502   \u2502   \u251c\u2500\u2500 package.json\n\u2502   \u2502   \u2514\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 docs/                # \u6587\u6863\u7ad9\n\u2502       \u251c\u2500\u2500 package.json\n\u2502       \u2514\u2500\u2500 src/\n\u251c\u2500\u2500 packages/\n\u2502   \u251c\u2500\u2500 ui/                  # \u5171\u4eab UI \u7ec4\u4ef6\n\u2502   \u2502   \u251c\u2500\u2500 package.json\n\u2502   \u2502   \u2514\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 utils/               # \u5de5\u5177\u51fd\u6570\n\u2502   \u2502   \u251c\u2500\u2500 package.json\n\u2502   \u2502   \u2514\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 config/              # \u5171\u4eab\u914d\u7f6e\n\u2502       \u251c\u2500\u2500 package.json\n\u2502       \u251c\u2500\u2500 eslint/\n\u2502       \u2514\u2500\u2500 typescript/\n\u2514\u2500\u2500 tooling/\n    \u2514\u2500\u2500 scripts/             # \u5de5\u5177\u811a\u672c\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"-\u642d\u5efa\u6b65\u9aa4",children:"\ud83d\ude80 \u642d\u5efa\u6b65\u9aa4"}),"\n",(0,l.jsx)(e.h3,{id:"1-\u521d\u59cb\u5316\u9879\u76ee",children:"1. \u521d\u59cb\u5316\u9879\u76ee"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"mkdir my-monorepo && cd my-monorepo\npnpm init\n"})}),"\n",(0,l.jsx)(e.h3,{id:"2-\u914d\u7f6e-pnpm-workspace",children:"2. \u914d\u7f6e pnpm workspace"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"# pnpm-workspace.yaml\npackages:\n  - 'apps/*'\n  - 'packages/*'\n"})}),"\n",(0,l.jsx)(e.h3,{id:"3-\u6839\u76ee\u5f55-packagejson",children:"3. \u6839\u76ee\u5f55 package.json"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",children:'{\n  "name": "my-monorepo",\n  "private": true,\n  "scripts": {\n    "dev": "turbo dev",\n    "build": "turbo build",\n    "lint": "turbo lint",\n    "test": "turbo test",\n    "clean": "turbo clean"\n  },\n  "devDependencies": {\n    "turbo": "^1.10.0"\n  },\n  "packageManager": "pnpm@8.10.0"\n}\n'})}),"\n",(0,l.jsx)(e.h3,{id:"4-\u914d\u7f6e-turborepo",children:"4. \u914d\u7f6e Turborepo"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",children:'// turbo.json\n{\n  "$schema": "https://turbo.build/schema.json",\n  "pipeline": {\n    "build": {\n      "dependsOn": ["^build"],\n      "outputs": ["dist/**", ".next/**"]\n    },\n    "dev": {\n      "cache": false,\n      "persistent": true\n    },\n    "lint": {},\n    "test": {\n      "dependsOn": ["build"]\n    },\n    "clean": {\n      "cache": false\n    }\n  }\n}\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"-\u521b\u5efa\u5171\u4eab\u5305",children:"\ud83d\udce6 \u521b\u5efa\u5171\u4eab\u5305"}),"\n",(0,l.jsx)(e.h3,{id:"packagesuipackagejson",children:"packages/ui/package.json"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",children:'{\n  "name": "@repo/ui",\n  "version": "0.0.0",\n  "private": true,\n  "main": "./src/index.ts",\n  "types": "./src/index.ts",\n  "exports": {\n    ".": "./src/index.ts",\n    "./button": "./src/button.tsx"\n  },\n  "scripts": {\n    "lint": "eslint src/",\n    "build": "tsup src/index.ts --format esm,cjs --dts"\n  },\n  "peerDependencies": {\n    "react": "^18.0.0"\n  },\n  "devDependencies": {\n    "@repo/config": "workspace:*",\n    "tsup": "^7.0.0",\n    "typescript": "^5.0.0"\n  }\n}\n'})}),"\n",(0,l.jsx)(e.h3,{id:"packagesuisrcbuttontsx",children:"packages/ui/src/button.tsx"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-tsx",children:"import { ButtonHTMLAttributes } from 'react';\n\ninterface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary';\n}\n\nexport function Button({ variant = 'primary', children, ...props }: ButtonProps) {\n  return (\n    <button className={`btn btn-${variant}`} {...props}>\n      {children}\n    </button>\n  );\n}\n"})}),"\n",(0,l.jsx)(e.h3,{id:"packagesuisrcindexts",children:"packages/ui/src/index.ts"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-ts",children:"export { Button } from './button';\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"-\u5305\u4e4b\u95f4\u7684\u4f9d\u8d56",children:"\ud83d\udd17 \u5305\u4e4b\u95f4\u7684\u4f9d\u8d56"}),"\n",(0,l.jsx)(e.h3,{id:"\u5728\u5e94\u7528\u4e2d\u4f7f\u7528\u5171\u4eab\u5305",children:"\u5728\u5e94\u7528\u4e2d\u4f7f\u7528\u5171\u4eab\u5305"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",children:'// apps/web/package.json\n{\n  "name": "@repo/web",\n  "dependencies": {\n    "@repo/ui": "workspace:*",\n    "@repo/utils": "workspace:*"\n  }\n}\n'})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-tsx",children:"// apps/web/src/app/page.tsx\nimport { Button } from '@repo/ui';\nimport { formatDate } from '@repo/utils';\n\nexport default function Page() {\n  return (\n    <div>\n      <Button onClick={() => console.log('clicked')}>\n        Click me\n      </Button>\n      <p>{formatDate(new Date())}</p>\n    </div>\n  );\n}\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u5b89\u88c5\u4f9d\u8d56",children:"\u5b89\u88c5\u4f9d\u8d56"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u5b89\u88c5\u5230\u7279\u5b9a\u5305\npnpm add lodash --filter @repo/web\n\n# \u5b89\u88c5\u5230\u6839\u76ee\u5f55\npnpm add -D typescript -w\n\n# \u5b89\u88c5\u5230\u6240\u6709\u5305\npnpm add -r react\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"\ufe0f-\u5171\u4eab\u914d\u7f6e",children:"\u2699\ufe0f \u5171\u4eab\u914d\u7f6e"}),"\n",(0,l.jsx)(e.h3,{id:"packagesconfigtsconfigbasejson",children:"packages/config/tsconfig/base.json"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",children:'{\n  "compilerOptions": {\n    "target": "ES2020",\n    "lib": ["ES2020", "DOM", "DOM.Iterable"],\n    "module": "ESNext",\n    "moduleResolution": "bundler",\n    "strict": true,\n    "skipLibCheck": true,\n    "declaration": true,\n    "declarationMap": true,\n    "esModuleInterop": true,\n    "forceConsistentCasingInFileNames": true,\n    "isolatedModules": true,\n    "jsx": "react-jsx"\n  }\n}\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\u5728\u5305\u4e2d\u4f7f\u7528",children:"\u5728\u5305\u4e2d\u4f7f\u7528"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",children:'// packages/ui/tsconfig.json\n{\n  "extends": "@repo/config/tsconfig/base.json",\n  "compilerOptions": {\n    "outDir": "./dist"\n  },\n  "include": ["src"],\n  "exclude": ["node_modules", "dist"]\n}\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"-\u8fd0\u884c\u547d\u4ee4",children:"\ud83c\udfc3 \u8fd0\u884c\u547d\u4ee4"}),"\n",(0,l.jsx)(e.h3,{id:"\u5f00\u53d1",children:"\u5f00\u53d1"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u8fd0\u884c\u6240\u6709\u5e94\u7528\npnpm dev\n\n# \u53ea\u8fd0\u884c\u7279\u5b9a\u5e94\u7528\npnpm dev --filter @repo/web\n\n# \u8fd0\u884c\u5e94\u7528\u53ca\u5176\u4f9d\u8d56\npnpm dev --filter @repo/web...\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u6784\u5efa",children:"\u6784\u5efa"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u6784\u5efa\u6240\u6709\npnpm build\n\n# \u53ea\u6784\u5efa\u53d8\u66f4\u7684\u5305\nturbo build --filter=[HEAD^1]\n\n# \u5e76\u884c\u6784\u5efa\nturbo build --concurrency=10\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u7f13\u5b58",children:"\u7f13\u5b58"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u67e5\u770b\u7f13\u5b58\u72b6\u6001\nturbo build --dry-run\n\n# \u5f3a\u5236\u5ffd\u7565\u7f13\u5b58\nturbo build --force\n\n# \u8fdc\u7a0b\u7f13\u5b58\uff08\u56e2\u961f\u5171\u4eab\uff09\nturbo login\nturbo link\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"-\u7248\u672c\u7ba1\u7406",children:"\ud83d\udccb \u7248\u672c\u7ba1\u7406"}),"\n",(0,l.jsx)(e.h3,{id:"\u4f7f\u7528-changesets",children:"\u4f7f\u7528 Changesets"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"pnpm add -Dw @changesets/cli\npnpm changeset init\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u6dfb\u52a0\u53d8\u66f4",children:"\u6dfb\u52a0\u53d8\u66f4"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"pnpm changeset\n# \u9009\u62e9\u53d8\u66f4\u7684\u5305\n# \u9009\u62e9\u7248\u672c\u7c7b\u578b\uff08patch/minor/major\uff09\n# \u6dfb\u52a0\u53d8\u66f4\u63cf\u8ff0\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u53d1\u5e03",children:"\u53d1\u5e03"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"pnpm changeset version  # \u66f4\u65b0\u7248\u672c\u53f7\npnpm changeset publish  # \u53d1\u5e03\u5230 npm\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"-\u5e38\u89c1\u95ee\u9898",children:"\ud83d\udd27 \u5e38\u89c1\u95ee\u9898"}),"\n",(0,l.jsx)(e.h3,{id:"1-\u4f9d\u8d56\u63d0\u5347",children:"1. \u4f9d\u8d56\u63d0\u5347"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"# .npmrc\nshamefully-hoist=true  # \u5fc5\u8981\u65f6\u542f\u7528\n"})}),"\n",(0,l.jsx)(e.h3,{id:"2-\u7c7b\u578b\u5f15\u7528",children:"2. \u7c7b\u578b\u5f15\u7528"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",children:'// tsconfig.json\n{\n  "compilerOptions": {\n    "paths": {\n      "@repo/ui": ["../../packages/ui/src"],\n      "@repo/utils": ["../../packages/utils/src"]\n    }\n  }\n}\n'})}),"\n",(0,l.jsx)(e.h3,{id:"3-\u6784\u5efa\u987a\u5e8f",children:"3. \u6784\u5efa\u987a\u5e8f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",children:'// turbo.json\n{\n  "pipeline": {\n    "build": {\n      "dependsOn": ["^build"]  // \u5148\u6784\u5efa\u4f9d\u8d56\n    }\n  }\n}\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"-\u6700\u4f73\u5b9e\u8df5",children:"\u2705 \u6700\u4f73\u5b9e\u8df5"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-markdown",children:"1. \u5305\u547d\u540d\u7edf\u4e00 scope\n   - @repo/ui, @repo/utils, @repo/config\n\n2. \u660e\u786e\u5305\u7684\u8fb9\u754c\n   - \u6bcf\u4e2a\u5305\u804c\u8d23\u5355\u4e00\n   - \u907f\u514d\u5faa\u73af\u4f9d\u8d56\n\n3. \u7edf\u4e00\u5de5\u5177\u94fe\n   - \u5171\u4eab ESLint\u3001Prettier\u3001TypeScript \u914d\u7f6e\n   - \u7edf\u4e00\u811a\u672c\u547d\u540d\uff08dev, build, lint, test\uff09\n\n4. \u4f18\u5316 CI/CD\n   - \u5229\u7528\u7f13\u5b58\u51cf\u5c11\u6784\u5efa\u65f6\u95f4\n   - \u53ea\u6784\u5efa\u53d7\u5f71\u54cd\u7684\u5305\n\n5. \u6587\u6863\u5b8c\u5584\n   - \u6bcf\u4e2a\u5305\u6709 README\n   - \u8d21\u732e\u6307\u5357\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"-\u63a8\u8350\u8d44\u6e90",children:"\ud83d\udcda \u63a8\u8350\u8d44\u6e90"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://turbo.build/repo/docs",children:"Turborepo \u6587\u6863"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://pnpm.io/workspaces",children:"pnpm Workspaces"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://monorepo.tools/",children:"Monorepo.tools"})}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:"Monorepo \u9002\u5408\u6709\u591a\u4e2a\u76f8\u5173\u9879\u76ee\u7684\u573a\u666f\u3002\u9009\u62e9\u5408\u9002\u7684\u5de5\u5177\uff0c\u5efa\u7acb\u597d\u89c4\u8303\uff0c\u80fd\u5927\u5e45\u63d0\u5347\u5f00\u53d1\u6548\u7387\u3002"})]})}function p(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(d,{...n})}):d(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>t,x:()=>o});var r=s(6540);const l={},i=r.createContext(l);function t(n){const e=r.useContext(i);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:t(n.components),r.createElement(i.Provider,{value:e},n.children)}}}]);