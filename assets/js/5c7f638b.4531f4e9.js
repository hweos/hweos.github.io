"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7839],{6210:e=>{e.exports=JSON.parse('{"permalink":"/blog/browser-rendering","editUrl":"https://github.com/hweos/git-pages/edit/main/blog/2024-04-20-browser-rendering.md","source":"@site/blog/2024-04-20-browser-rendering.md","title":"\u6d4f\u89c8\u5668\u6e32\u67d3\u539f\u7406\u6df1\u5ea6\u89e3\u6790","description":"\u7406\u89e3\u6d4f\u89c8\u5668\u6e32\u67d3\u539f\u7406\u662f\u524d\u7aef\u6027\u80fd\u4f18\u5316\u7684\u57fa\u7840\u3002\u672c\u6587\u6df1\u5165\u89e3\u6790\u4ece HTML \u5230\u50cf\u7d20\u7684\u5b8c\u6574\u8fc7\u7a0b\u3002","date":"2024-04-20T00:00:00.000Z","tags":[{"inline":true,"label":"\u6d4f\u89c8\u5668","permalink":"/blog/tags/\u6d4f\u89c8\u5668"},{"inline":true,"label":"\u6027\u80fd","permalink":"/blog/tags/\u6027\u80fd"},{"inline":true,"label":"\u524d\u7aef","permalink":"/blog/tags/\u524d\u7aef"}],"readingTime":3.31,"hasTruncateMarker":true,"authors":[{"name":"Mason","title":"Full Stack Developer","url":"https://github.com/HuangZhe007","socials":{"github":"https://github.com/HuangZhe007"},"imageURL":"https://avatars.githubusercontent.com/u/45168628?v=4","key":"mason","page":null}],"frontMatter":{"slug":"browser-rendering","title":"\u6d4f\u89c8\u5668\u6e32\u67d3\u539f\u7406\u6df1\u5ea6\u89e3\u6790","authors":"mason","tags":["\u6d4f\u89c8\u5668","\u6027\u80fd","\u524d\u7aef"]},"unlisted":false,"prevItem":{"title":"RESTful API \u8bbe\u8ba1\u89c4\u8303\u4e0e\u6700\u4f73\u5b9e\u8df5","permalink":"/blog/restful-api-design"},"nextItem":{"title":"\u524d\u7aef\u5b89\u5168\u5b9e\u8df5\u6307\u5357","permalink":"/blog/frontend-security"}}')},7976:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>o,frontMatter:()=>t,metadata:()=>s,toc:()=>h});var s=l(6210),r=l(4848),i=l(8453);const t={slug:"browser-rendering",title:"\u6d4f\u89c8\u5668\u6e32\u67d3\u539f\u7406\u6df1\u5ea6\u89e3\u6790",authors:"mason",tags:["\u6d4f\u89c8\u5668","\u6027\u80fd","\u524d\u7aef"]},d=void 0,c={authorsImageUrls:[void 0]},h=[{value:"\ud83d\udd04 \u6e32\u67d3\u6d41\u7a0b\u6982\u89c8",id:"-\u6e32\u67d3\u6d41\u7a0b\u6982\u89c8",level:2},{value:"\ud83c\udf33 DOM \u4e0e CSSOM",id:"-dom-\u4e0e-cssom",level:2},{value:"DOM Tree \u6784\u5efa",id:"dom-tree-\u6784\u5efa",level:3},{value:"CSSOM Tree \u6784\u5efa",id:"cssom-tree-\u6784\u5efa",level:3},{value:"\u963b\u585e\u884c\u4e3a",id:"\u963b\u585e\u884c\u4e3a",level:3},{value:"\ud83d\udcd0 Layout (Reflow) \u91cd\u6392",id:"-layout-reflow-\u91cd\u6392",level:2},{value:"\u4ec0\u4e48\u662f\u91cd\u6392",id:"\u4ec0\u4e48\u662f\u91cd\u6392",level:3},{value:"\u89e6\u53d1\u91cd\u6392\u7684\u64cd\u4f5c",id:"\u89e6\u53d1\u91cd\u6392\u7684\u64cd\u4f5c",level:3},{value:"\u907f\u514d\u91cd\u6392",id:"\u907f\u514d\u91cd\u6392",level:3},{value:"\u5f3a\u5236\u540c\u6b65\u5e03\u5c40",id:"\u5f3a\u5236\u540c\u6b65\u5e03\u5c40",level:3},{value:"\ud83c\udfa8 Paint (Repaint) \u91cd\u7ed8",id:"-paint-repaint-\u91cd\u7ed8",level:2},{value:"\u4ec0\u4e48\u662f\u91cd\u7ed8",id:"\u4ec0\u4e48\u662f\u91cd\u7ed8",level:3},{value:"\u53ea\u89e6\u53d1\u91cd\u7ed8\u7684\u5c5e\u6027",id:"\u53ea\u89e6\u53d1\u91cd\u7ed8\u7684\u5c5e\u6027",level:3},{value:"\u91cd\u7ed8 vs \u91cd\u6392",id:"\u91cd\u7ed8-vs-\u91cd\u6392",level:3},{value:"\ud83e\udde9 Composite \u5408\u6210",id:"-composite-\u5408\u6210",level:2},{value:"\u4ec0\u4e48\u662f\u5408\u6210",id:"\u4ec0\u4e48\u662f\u5408\u6210",level:3},{value:"\u521b\u5efa\u72ec\u7acb\u56fe\u5c42\u7684\u5c5e\u6027",id:"\u521b\u5efa\u72ec\u7acb\u56fe\u5c42\u7684\u5c5e\u6027",level:3},{value:"\u53ea\u89e6\u53d1\u5408\u6210\u7684\u5c5e\u6027",id:"\u53ea\u89e6\u53d1\u5408\u6210\u7684\u5c5e\u6027",level:3},{value:"\u26a1 \u6027\u80fd\u4f18\u5316\u7b56\u7565",id:"-\u6027\u80fd\u4f18\u5316\u7b56\u7565",level:2},{value:"1. \u51cf\u5c11\u5173\u952e\u8d44\u6e90",id:"1-\u51cf\u5c11\u5173\u952e\u8d44\u6e90",level:3},{value:"2. \u51cf\u5c11\u963b\u585e",id:"2-\u51cf\u5c11\u963b\u585e",level:3},{value:"3. \u4f7f\u7528 transform \u66ff\u4ee3\u4f4d\u7f6e\u5c5e\u6027",id:"3-\u4f7f\u7528-transform-\u66ff\u4ee3\u4f4d\u7f6e\u5c5e\u6027",level:3},{value:"4. \u4f7f\u7528 requestAnimationFrame",id:"4-\u4f7f\u7528-requestanimationframe",level:3},{value:"5. \u865a\u62df\u5217\u8868",id:"5-\u865a\u62df\u5217\u8868",level:3},{value:"\ud83d\udd0d \u8c03\u8bd5\u5de5\u5177",id:"-\u8c03\u8bd5\u5de5\u5177",level:2},{value:"Chrome DevTools",id:"chrome-devtools",level:3},{value:"\u6253\u5f00 Rendering \u9762\u677f",id:"\u6253\u5f00-rendering-\u9762\u677f",level:3},{value:"\ud83d\udcca \u6838\u5fc3 Web \u6307\u6807",id:"-\u6838\u5fc3-web-\u6307\u6807",level:2},{value:"\ud83d\udcda \u63a8\u8350\u8d44\u6e90",id:"-\u63a8\u8350\u8d44\u6e90",level:2}];function a(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"\u7406\u89e3\u6d4f\u89c8\u5668\u6e32\u67d3\u539f\u7406\u662f\u524d\u7aef\u6027\u80fd\u4f18\u5316\u7684\u57fa\u7840\u3002\u672c\u6587\u6df1\u5165\u89e3\u6790\u4ece HTML \u5230\u50cf\u7d20\u7684\u5b8c\u6574\u8fc7\u7a0b\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"-\u6e32\u67d3\u6d41\u7a0b\u6982\u89c8",children:"\ud83d\udd04 \u6e32\u67d3\u6d41\u7a0b\u6982\u89c8"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"HTML \u2192 DOM Tree\n              \u2198\n                \u2192 Render Tree \u2192 Layout \u2192 Paint \u2192 Composite\n              \u2197\nCSS \u2192 CSSOM Tree\n"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u6790 HTML"})," \u2192 \u6784\u5efa DOM Tree"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u6790 CSS"})," \u2192 \u6784\u5efa CSSOM Tree"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5408\u5e76"})," \u2192 \u751f\u6210 Render Tree"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5e03\u5c40 (Layout)"})," \u2192 \u8ba1\u7b97\u51e0\u4f55\u4fe1\u606f"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u7ed8\u5236 (Paint)"})," \u2192 \u586b\u5145\u50cf\u7d20"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5408\u6210 (Composite)"})," \u2192 \u56fe\u5c42\u5408\u6210"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-dom-\u4e0e-cssom",children:"\ud83c\udf33 DOM \u4e0e CSSOM"}),"\n",(0,r.jsx)(n.h3,{id:"dom-tree-\u6784\u5efa",children:"DOM Tree \u6784\u5efa"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<html>\n  <head><title>Page</title></head>\n  <body>\n    <div class="container">\n      <p>Hello</p>\n    </div>\n  </body>\n</html>\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'Document\n\u2514\u2500\u2500 html\n    \u251c\u2500\u2500 head\n    \u2502   \u2514\u2500\u2500 title\n    \u2502       \u2514\u2500\u2500 "Page"\n    \u2514\u2500\u2500 body\n        \u2514\u2500\u2500 div.container\n            \u2514\u2500\u2500 p\n                \u2514\u2500\u2500 "Hello"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"cssom-tree-\u6784\u5efa",children:"CSSOM Tree \u6784\u5efa"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-css",children:"body { font-size: 16px; }\n.container { width: 100%; }\np { color: blue; }\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"body\n\u251c\u2500\u2500 font-size: 16px\n\u2514\u2500\u2500 .container\n    \u251c\u2500\u2500 width: 100%\n    \u2514\u2500\u2500 p\n        \u2514\u2500\u2500 color: blue\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u963b\u585e\u884c\u4e3a",children:"\u963b\u585e\u884c\u4e3a"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u8d44\u6e90"}),(0,r.jsx)(n.th,{children:"\u963b\u585e DOM \u89e3\u6790"}),(0,r.jsx)(n.th,{children:"\u963b\u585e\u6e32\u67d3"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"HTML"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"-"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"CSS"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<script>"})}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<script async>"})}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u274c"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<script defer>"})}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u274c"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-layout-reflow-\u91cd\u6392",children:"\ud83d\udcd0 Layout (Reflow) \u91cd\u6392"}),"\n",(0,r.jsx)(n.h3,{id:"\u4ec0\u4e48\u662f\u91cd\u6392",children:"\u4ec0\u4e48\u662f\u91cd\u6392"}),"\n",(0,r.jsx)(n.p,{children:"\u8ba1\u7b97\u5143\u7d20\u7684\u51e0\u4f55\u4fe1\u606f\uff1a\u4f4d\u7f6e\u3001\u5927\u5c0f\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u89e6\u53d1\u91cd\u6392\u7684\u64cd\u4f5c",children:"\u89e6\u53d1\u91cd\u6392\u7684\u64cd\u4f5c"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// \u4fee\u6539\u51e0\u4f55\u5c5e\u6027\nelement.style.width = '100px';\nelement.style.height = '200px';\nelement.style.margin = '10px';\nelement.style.padding = '20px';\n\n// \u8bfb\u53d6\u51e0\u4f55\u5c5e\u6027\nelement.offsetWidth;\nelement.offsetHeight;\nelement.getBoundingClientRect();\n\n// DOM \u64cd\u4f5c\nelement.appendChild(child);\nelement.removeChild(child);\n\n// \u5176\u4ed6\nwindow.resize\n\u6539\u53d8\u5b57\u4f53\u5927\u5c0f\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u907f\u514d\u91cd\u6392",children:"\u907f\u514d\u91cd\u6392"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// \u274c \u89e6\u53d1\u591a\u6b21\u91cd\u6392\nelement.style.width = '100px';\nelement.style.height = '200px';\nelement.style.margin = '10px';\n\n// \u2705 \u4f7f\u7528 class \u4e00\u6b21\u6027\u4fee\u6539\nelement.classList.add('new-style');\n\n// \u2705 \u4f7f\u7528 cssText\nelement.style.cssText = 'width: 100px; height: 200px; margin: 10px;';\n\n// \u2705 \u79bb\u7ebf\u64cd\u4f5c DOM\nconst fragment = document.createDocumentFragment();\nitems.forEach(item => fragment.appendChild(createItem(item)));\ncontainer.appendChild(fragment);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u5f3a\u5236\u540c\u6b65\u5e03\u5c40",children:"\u5f3a\u5236\u540c\u6b65\u5e03\u5c40"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// \u274c \u8bfb\u5199\u4ea4\u66ff\u5bfc\u81f4\u5f3a\u5236\u540c\u6b65\u5e03\u5c40\nfor (let i = 0; i < elements.length; i++) {\n  elements[i].style.width = box.offsetWidth + 'px'; // \u6bcf\u6b21\u5faa\u73af\u90fd\u89e6\u53d1\u91cd\u6392\n}\n\n// \u2705 \u5148\u8bfb\u540e\u5199\nconst width = box.offsetWidth;\nfor (let i = 0; i < elements.length; i++) {\n  elements[i].style.width = width + 'px';\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-paint-repaint-\u91cd\u7ed8",children:"\ud83c\udfa8 Paint (Repaint) \u91cd\u7ed8"}),"\n",(0,r.jsx)(n.h3,{id:"\u4ec0\u4e48\u662f\u91cd\u7ed8",children:"\u4ec0\u4e48\u662f\u91cd\u7ed8"}),"\n",(0,r.jsx)(n.p,{children:"\u586b\u5145\u50cf\u7d20\uff1a\u989c\u8272\u3001\u80cc\u666f\u3001\u9634\u5f71\u7b49\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u53ea\u89e6\u53d1\u91cd\u7ed8\u7684\u5c5e\u6027",children:"\u53ea\u89e6\u53d1\u91cd\u7ed8\u7684\u5c5e\u6027"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// \u4e0d\u5f71\u54cd\u5e03\u5c40\uff0c\u53ea\u89e6\u53d1\u91cd\u7ed8\nelement.style.color = 'red';\nelement.style.backgroundColor = 'blue';\nelement.style.visibility = 'hidden';\nelement.style.boxShadow = '0 0 10px black';\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u91cd\u7ed8-vs-\u91cd\u6392",children:"\u91cd\u7ed8 vs \u91cd\u6392"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u64cd\u4f5c"}),(0,r.jsx)(n.th,{children:"\u91cd\u6392"}),(0,r.jsx)(n.th,{children:"\u91cd\u7ed8"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u4fee\u6539 width/height"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u4fee\u6539 color"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u4fee\u6539 transform"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u274c"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u4fee\u6539 opacity"}),(0,r.jsx)(n.td,{children:"\u274c"}),(0,r.jsx)(n.td,{children:"\u274c"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-composite-\u5408\u6210",children:"\ud83e\udde9 Composite \u5408\u6210"}),"\n",(0,r.jsx)(n.h3,{id:"\u4ec0\u4e48\u662f\u5408\u6210",children:"\u4ec0\u4e48\u662f\u5408\u6210"}),"\n",(0,r.jsx)(n.p,{children:"\u5c06\u591a\u4e2a\u56fe\u5c42\u5408\u5e76\u6210\u6700\u7ec8\u56fe\u50cf\uff0c\u7531 GPU \u5904\u7406\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u521b\u5efa\u72ec\u7acb\u56fe\u5c42\u7684\u5c5e\u6027",children:"\u521b\u5efa\u72ec\u7acb\u56fe\u5c42\u7684\u5c5e\u6027"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-css",children:"/* \u4ee5\u4e0b\u5c5e\u6027\u4f1a\u521b\u5efa\u65b0\u56fe\u5c42 */\ntransform: translateZ(0);\nwill-change: transform;\nopacity: 0.99;\nposition: fixed;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u53ea\u89e6\u53d1\u5408\u6210\u7684\u5c5e\u6027",children:"\u53ea\u89e6\u53d1\u5408\u6210\u7684\u5c5e\u6027"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-css",children:"/* \u6700\u9ad8\u6027\u80fd - \u53ea\u89e6\u53d1\u5408\u6210 */\ntransform: translate(), scale(), rotate();\nopacity: 0 ~ 1;\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-\u6027\u80fd\u4f18\u5316\u7b56\u7565",children:"\u26a1 \u6027\u80fd\u4f18\u5316\u7b56\u7565"}),"\n",(0,r.jsx)(n.h3,{id:"1-\u51cf\u5c11\u5173\u952e\u8d44\u6e90",children:"1. \u51cf\u5c11\u5173\u952e\u8d44\u6e90"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'\x3c!-- \u5185\u8054\u5173\u952e CSS --\x3e\n<style>\n  /* \u9996\u5c4f\u5173\u952e\u6837\u5f0f */\n</style>\n\n\x3c!-- \u5f02\u6b65\u52a0\u8f7d\u975e\u5173\u952e CSS --\x3e\n<link rel="preload" href="styles.css" as="style" onload="this.rel=\'stylesheet\'">\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2-\u51cf\u5c11\u963b\u585e",children:"2. \u51cf\u5c11\u963b\u585e"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'\x3c!-- JS \u653e\u5e95\u90e8\u6216\u4f7f\u7528 defer --\x3e\n<script defer src="app.js"><\/script>\n\n\x3c!-- \u9884\u52a0\u8f7d\u5173\u952e\u8d44\u6e90 --\x3e\n<link rel="preload" href="font.woff2" as="font" crossorigin>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-\u4f7f\u7528-transform-\u66ff\u4ee3\u4f4d\u7f6e\u5c5e\u6027",children:"3. \u4f7f\u7528 transform \u66ff\u4ee3\u4f4d\u7f6e\u5c5e\u6027"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-css",children:"/* \u274c \u89e6\u53d1\u91cd\u6392 */\n.animate {\n  left: 100px;\n  top: 100px;\n}\n\n/* \u2705 \u53ea\u89e6\u53d1\u5408\u6210 */\n.animate {\n  transform: translate(100px, 100px);\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-\u4f7f\u7528-requestanimationframe",children:"4. \u4f7f\u7528 requestAnimationFrame"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// \u274c \u53ef\u80fd\u5728\u4e0d\u5408\u9002\u7684\u65f6\u673a\u6267\u884c\nsetInterval(() => {\n  element.style.transform = `translateX(${x++}px)`;\n}, 16);\n\n// \u2705 \u4e0e\u6d4f\u89c8\u5668\u5237\u65b0\u540c\u6b65\nfunction animate() {\n  element.style.transform = `translateX(${x++}px)`;\n  requestAnimationFrame(animate);\n}\nrequestAnimationFrame(animate);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"5-\u865a\u62df\u5217\u8868",children:"5. \u865a\u62df\u5217\u8868"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// \u53ea\u6e32\u67d3\u53ef\u89c1\u533a\u57df\u7684\u5143\u7d20\n// \u4f7f\u7528 react-window / react-virtualized\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-\u8c03\u8bd5\u5de5\u5177",children:"\ud83d\udd0d \u8c03\u8bd5\u5de5\u5177"}),"\n",(0,r.jsx)(n.h3,{id:"chrome-devtools",children:"Chrome DevTools"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Performance"})," \u9762\u677f"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5f55\u5236\u6e32\u67d3\u8fc7\u7a0b"}),"\n",(0,r.jsx)(n.li,{children:"\u67e5\u770b\u706b\u7130\u56fe"}),"\n",(0,r.jsx)(n.li,{children:"\u5206\u6790\u957f\u4efb\u52a1"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Rendering"})," \u9762\u677f"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Paint flashing\uff08\u9ad8\u4eae\u91cd\u7ed8\u533a\u57df\uff09"}),"\n",(0,r.jsx)(n.li,{children:"Layout Shift Regions\uff08\u5e03\u5c40\u504f\u79fb\uff09"}),"\n",(0,r.jsx)(n.li,{children:"Layer borders\uff08\u56fe\u5c42\u8fb9\u754c\uff09"}),"\n",(0,r.jsx)(n.li,{children:"FPS meter\uff08\u5e27\u7387\u663e\u793a\uff09"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u6253\u5f00-rendering-\u9762\u677f",children:"\u6253\u5f00 Rendering \u9762\u677f"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u6253\u5f00 DevTools"}),"\n",(0,r.jsx)(n.li,{children:"Cmd+Shift+P"}),"\n",(0,r.jsx)(n.li,{children:'\u8f93\u5165 "Show Rendering"'}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-\u6838\u5fc3-web-\u6307\u6807",children:"\ud83d\udcca \u6838\u5fc3 Web \u6307\u6807"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u6307\u6807"}),(0,r.jsx)(n.th,{children:"\u542b\u4e49"}),(0,r.jsx)(n.th,{children:"\u76ee\u6807"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"LCP"})}),(0,r.jsx)(n.td,{children:"\u6700\u5927\u5185\u5bb9\u7ed8\u5236"}),(0,r.jsx)(n.td,{children:"< 2.5s"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"FID"})}),(0,r.jsx)(n.td,{children:"\u9996\u6b21\u8f93\u5165\u5ef6\u8fdf"}),(0,r.jsx)(n.td,{children:"< 100ms"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"CLS"})}),(0,r.jsx)(n.td,{children:"\u7d2f\u79ef\u5e03\u5c40\u504f\u79fb"}),(0,r.jsx)(n.td,{children:"< 0.1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"FCP"})}),(0,r.jsx)(n.td,{children:"\u9996\u6b21\u5185\u5bb9\u7ed8\u5236"}),(0,r.jsx)(n.td,{children:"< 1.8s"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"TTFB"})}),(0,r.jsx)(n.td,{children:"\u9996\u5b57\u8282\u65f6\u95f4"}),(0,r.jsx)(n.td,{children:"< 800ms"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-\u63a8\u8350\u8d44\u6e90",children:"\ud83d\udcda \u63a8\u8350\u8d44\u6e90"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developer.chrome.com/blog/inside-browser-part1/",children:"Inside look at modern web browser"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://web.dev/rendering-performance/",children:"Rendering Performance"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://csstriggers.com/",children:"CSS Triggers"})}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:["\u7406\u89e3\u6e32\u67d3\u539f\u7406\u540e\uff0c\u4f60\u4f1a\u66f4\u6e05\u695a\u4e3a\u4ec0\u4e48\u67d0\u4e9b\u4f18\u5316\u7b56\u7565\u6709\u6548\u3002\u8bb0\u4f4f\uff1a",(0,r.jsx)(n.strong,{children:"\u6d4b\u91cf\u5148\u4e8e\u4f18\u5316"}),"\u3002"]})]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,l)=>{l.d(n,{R:()=>t,x:()=>d});var s=l(6540);const r={},i=s.createContext(r);function t(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);