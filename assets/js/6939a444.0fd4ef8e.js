"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8687],{3827:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>r,contentTitle:()=>i,default:()=>m,frontMatter:()=>d,metadata:()=>s,toc:()=>c});var s=l(4514),p=l(4848),a=l(8453);const d={slug:"npm-pnpm-guide",title:"npm/pnpm \u5305\u7ba1\u7406\u5b9e\u8df5\u6307\u5357",authors:"mason",tags:["npm","pnpm","\u5de5\u5177","\u524d\u7aef\u5de5\u7a0b\u5316"]},i=void 0,r={authorsImageUrls:[void 0]},c=[{value:"\ud83d\udce6 \u5305\u7ba1\u7406\u5668\u5bf9\u6bd4",id:"-\u5305\u7ba1\u7406\u5668\u5bf9\u6bd4",level:2},{value:"\ud83d\ude80 pnpm \u5feb\u901f\u4e0a\u624b",id:"-pnpm-\u5feb\u901f\u4e0a\u624b",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:3},{value:"\u5e38\u7528\u547d\u4ee4",id:"\u5e38\u7528\u547d\u4ee4",level:3},{value:"\ud83d\udccb package.json \u8be6\u89e3",id:"-packagejson-\u8be6\u89e3",level:2},{value:"\u57fa\u672c\u7ed3\u6784",id:"\u57fa\u672c\u7ed3\u6784",level:3},{value:"\u7248\u672c\u53f7\u89c4\u5219",id:"\u7248\u672c\u53f7\u89c4\u5219",level:3},{value:"\u4f9d\u8d56\u7c7b\u578b",id:"\u4f9d\u8d56\u7c7b\u578b",level:3},{value:"\ud83d\udd12 \u9501\u6587\u4ef6",id:"-\u9501\u6587\u4ef6",level:2},{value:"package-lock.json (npm)",id:"package-lockjson-npm",level:3},{value:"pnpm-lock.yaml",id:"pnpm-lockyaml",level:3},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:3},{value:"\u2699\ufe0f \u914d\u7f6e\u6587\u4ef6",id:"\ufe0f-\u914d\u7f6e\u6587\u4ef6",level:2},{value:".npmrc",id:"npmrc",level:3},{value:".nvmrc",id:"nvmrc",level:3},{value:"engines \u5b57\u6bb5",id:"engines-\u5b57\u6bb5",level:3},{value:"\ud83d\udee0\ufe0f \u5b9e\u7528\u6280\u5de7",id:"\ufe0f-\u5b9e\u7528\u6280\u5de7",level:2},{value:"1. \u67e5\u770b\u4f9d\u8d56\u4fe1\u606f",id:"1-\u67e5\u770b\u4f9d\u8d56\u4fe1\u606f",level:3},{value:"2. \u6e05\u7406\u7f13\u5b58",id:"2-\u6e05\u7406\u7f13\u5b58",level:3},{value:"3. \u5b89\u5168\u5ba1\u8ba1",id:"3-\u5b89\u5168\u5ba1\u8ba1",level:3},{value:"4. \u53d1\u5e03\u5305",id:"4-\u53d1\u5e03\u5305",level:3},{value:"\ud83d\udcc2 Workspaces",id:"-workspaces",level:2},{value:"pnpm-workspace.yaml",id:"pnpm-workspaceyaml",level:3},{value:"\u76ee\u5f55\u7ed3\u6784",id:"\u76ee\u5f55\u7ed3\u6784",level:3},{value:"Workspace \u547d\u4ee4",id:"workspace-\u547d\u4ee4",level:3},{value:"\ud83d\udd27 \u811a\u672c\u6280\u5de7",id:"-\u811a\u672c\u6280\u5de7",level:2},{value:"\u5e76\u884c/\u4e32\u884c\u6267\u884c",id:"\u5e76\u884c\u4e32\u884c\u6267\u884c",level:3},{value:"\u524d\u7f6e/\u540e\u7f6e\u811a\u672c",id:"\u524d\u7f6e\u540e\u7f6e\u811a\u672c",level:3},{value:"\u8de8\u5e73\u53f0\u811a\u672c",id:"\u8de8\u5e73\u53f0\u811a\u672c",level:3},{value:"\u2753 \u5e38\u89c1\u95ee\u9898",id:"-\u5e38\u89c1\u95ee\u9898",level:2},{value:"\u5e7d\u7075\u4f9d\u8d56",id:"\u5e7d\u7075\u4f9d\u8d56",level:3},{value:"\u4f9d\u8d56\u51b2\u7a81",id:"\u4f9d\u8d56\u51b2\u7a81",level:3},{value:"\u5b89\u88c5\u5931\u8d25",id:"\u5b89\u88c5\u5931\u8d25",level:3},{value:"\ud83d\udcda \u63a8\u8350\u914d\u7f6e",id:"-\u63a8\u8350\u914d\u7f6e",level:2}];function t(n){const e={code:"code",h2:"h2",h3:"h3",hr:"hr",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...n.components};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(e.p,{children:"\u5305\u7ba1\u7406\u5668\u662f\u524d\u7aef\u5f00\u53d1\u7684\u57fa\u7840\u5de5\u5177\u3002\u672c\u6587\u5bf9\u6bd4 npm \u548c pnpm\uff0c\u5206\u4eab\u6700\u4f73\u5b9e\u8df5\u3002"}),"\n",(0,p.jsx)(e.h2,{id:"-\u5305\u7ba1\u7406\u5668\u5bf9\u6bd4",children:"\ud83d\udce6 \u5305\u7ba1\u7406\u5668\u5bf9\u6bd4"}),"\n",(0,p.jsxs)(e.table,{children:[(0,p.jsx)(e.thead,{children:(0,p.jsxs)(e.tr,{children:[(0,p.jsx)(e.th,{children:"\u7279\u6027"}),(0,p.jsx)(e.th,{children:"npm"}),(0,p.jsx)(e.th,{children:"pnpm"})]})}),(0,p.jsxs)(e.tbody,{children:[(0,p.jsxs)(e.tr,{children:[(0,p.jsx)(e.td,{children:"\u5b89\u88c5\u901f\u5ea6"}),(0,p.jsx)(e.td,{children:"\u6162"}),(0,p.jsx)(e.td,{children:"\u5feb 2-3 \u500d"})]}),(0,p.jsxs)(e.tr,{children:[(0,p.jsx)(e.td,{children:"\u78c1\u76d8\u5360\u7528"}),(0,p.jsx)(e.td,{children:"\u5927\uff08\u91cd\u590d\u5b89\u88c5\uff09"}),(0,p.jsx)(e.td,{children:"\u5c0f\uff08\u786c\u94fe\u63a5\uff09"})]}),(0,p.jsxs)(e.tr,{children:[(0,p.jsx)(e.td,{children:"node_modules \u7ed3\u6784"}),(0,p.jsx)(e.td,{children:"\u6241\u5e73\u5316"}),(0,p.jsx)(e.td,{children:"\u7b26\u53f7\u94fe\u63a5"})]}),(0,p.jsxs)(e.tr,{children:[(0,p.jsx)(e.td,{children:"\u5e7d\u7075\u4f9d\u8d56"}),(0,p.jsx)(e.td,{children:"\u5b58\u5728"}),(0,p.jsx)(e.td,{children:"\u907f\u514d"})]}),(0,p.jsxs)(e.tr,{children:[(0,p.jsx)(e.td,{children:"Monorepo \u652f\u6301"}),(0,p.jsx)(e.td,{children:"workspaces"}),(0,p.jsx)(e.td,{children:"\u5185\u7f6e workspace"})]})]})]}),"\n",(0,p.jsx)(e.hr,{}),"\n",(0,p.jsx)(e.h2,{id:"-pnpm-\u5feb\u901f\u4e0a\u624b",children:"\ud83d\ude80 pnpm \u5feb\u901f\u4e0a\u624b"}),"\n",(0,p.jsx)(e.h3,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-bash",children:"# \u4f7f\u7528 npm \u5b89\u88c5\nnpm install -g pnpm\n\n# \u4f7f\u7528 Homebrew\nbrew install pnpm\n\n# \u4f7f\u7528 corepack (Node.js 16.13+)\ncorepack enable\ncorepack prepare pnpm@latest --activate\n"})}),"\n",(0,p.jsx)(e.h3,{id:"\u5e38\u7528\u547d\u4ee4",children:"\u5e38\u7528\u547d\u4ee4"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-bash",children:"# \u5b89\u88c5\u4f9d\u8d56\npnpm install\npnpm i\n\n# \u6dfb\u52a0\u4f9d\u8d56\npnpm add lodash\npnpm add -D typescript    # devDependencies\npnpm add -g serve         # \u5168\u5c40\u5b89\u88c5\n\n# \u79fb\u9664\u4f9d\u8d56\npnpm remove lodash\npnpm rm lodash\n\n# \u66f4\u65b0\u4f9d\u8d56\npnpm update\npnpm up lodash\npnpm up --latest          # \u66f4\u65b0\u5230\u6700\u65b0\u7248\u672c\n\n# \u8fd0\u884c\u811a\u672c\npnpm run dev\npnpm dev                  # \u7b80\u5199\n\n# \u6267\u884c\u547d\u4ee4\npnpm exec tsc\npnpm dlx create-react-app my-app  # \u7c7b\u4f3c npx\n"})}),"\n",(0,p.jsx)(e.hr,{}),"\n",(0,p.jsx)(e.h2,{id:"-packagejson-\u8be6\u89e3",children:"\ud83d\udccb package.json \u8be6\u89e3"}),"\n",(0,p.jsx)(e.h3,{id:"\u57fa\u672c\u7ed3\u6784",children:"\u57fa\u672c\u7ed3\u6784"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-json",children:'{\n  "name": "my-project",\n  "version": "1.0.0",\n  "description": "\u9879\u76ee\u63cf\u8ff0",\n  "main": "dist/index.js",\n  "module": "dist/index.mjs",\n  "types": "dist/index.d.ts",\n  "scripts": {\n    "dev": "vite",\n    "build": "vite build",\n    "test": "vitest"\n  },\n  "dependencies": {\n    "react": "^18.2.0"\n  },\n  "devDependencies": {\n    "typescript": "^5.0.0"\n  }\n}\n'})}),"\n",(0,p.jsx)(e.h3,{id:"\u7248\u672c\u53f7\u89c4\u5219",children:"\u7248\u672c\u53f7\u89c4\u5219"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-markdown",children:"\u4e3b\u7248\u672c.\u6b21\u7248\u672c.\u8865\u4e01\u7248\u672c\n  ^     ~     \u65e0\u524d\u7f00\n\n^18.2.0  \u2192 >=18.2.0 <19.0.0  (\u5141\u8bb8\u6b21\u7248\u672c\u548c\u8865\u4e01\u66f4\u65b0)\n~18.2.0  \u2192 >=18.2.0 <18.3.0  (\u53ea\u5141\u8bb8\u8865\u4e01\u66f4\u65b0)\n18.2.0   \u2192 \u7cbe\u786e\u7248\u672c\n*        \u2192 \u4efb\u610f\u7248\u672c\n>=18.0.0 \u2192 \u5927\u4e8e\u7b49\u4e8e\n"})}),"\n",(0,p.jsx)(e.h3,{id:"\u4f9d\u8d56\u7c7b\u578b",children:"\u4f9d\u8d56\u7c7b\u578b"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-json",children:'{\n  "dependencies": {\n    // \u751f\u4ea7\u4f9d\u8d56\uff0c\u6253\u5305\u4f1a\u5305\u542b\n  },\n  "devDependencies": {\n    // \u5f00\u53d1\u4f9d\u8d56\uff0c\u6253\u5305\u4e0d\u5305\u542b\n  },\n  "peerDependencies": {\n    // \u5bf9\u7b49\u4f9d\u8d56\uff0c\u5bbf\u4e3b\u9879\u76ee\u9700\u8981\u5b89\u88c5\n    "react": "^18.0.0"\n  },\n  "optionalDependencies": {\n    // \u53ef\u9009\u4f9d\u8d56\uff0c\u5b89\u88c5\u5931\u8d25\u4e0d\u4f1a\u62a5\u9519\n  }\n}\n'})}),"\n",(0,p.jsx)(e.hr,{}),"\n",(0,p.jsx)(e.h2,{id:"-\u9501\u6587\u4ef6",children:"\ud83d\udd12 \u9501\u6587\u4ef6"}),"\n",(0,p.jsx)(e.h3,{id:"package-lockjson-npm",children:"package-lock.json (npm)"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-json",children:'{\n  "name": "my-project",\n  "lockfileVersion": 3,\n  "packages": {\n    "node_modules/lodash": {\n      "version": "4.17.21",\n      "resolved": "https://registry.npmjs.org/lodash/-/lodash-4.17.21.tgz",\n      "integrity": "sha512-..."\n    }\n  }\n}\n'})}),"\n",(0,p.jsx)(e.h3,{id:"pnpm-lockyaml",children:"pnpm-lock.yaml"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-yaml",children:"lockfileVersion: '6.0'\ndependencies:\n  lodash:\n    specifier: ^4.17.21\n    version: 4.17.21\npackages:\n  /lodash@4.17.21:\n    resolution: {integrity: sha512-...}\n"})}),"\n",(0,p.jsx)(e.h3,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-markdown",children:"\u2705 \u63d0\u4ea4\u9501\u6587\u4ef6\u5230 Git\n\u2705 \u4e0d\u8981\u624b\u52a8\u4fee\u6539\u9501\u6587\u4ef6\n\u2705 \u56e2\u961f\u4f7f\u7528\u76f8\u540c\u5305\u7ba1\u7406\u5668\n\u2705 CI \u4f7f\u7528 npm ci / pnpm install --frozen-lockfile\n"})}),"\n",(0,p.jsx)(e.hr,{}),"\n",(0,p.jsx)(e.h2,{id:"\ufe0f-\u914d\u7f6e\u6587\u4ef6",children:"\u2699\ufe0f \u914d\u7f6e\u6587\u4ef6"}),"\n",(0,p.jsx)(e.h3,{id:"npmrc",children:".npmrc"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-ini",children:"# \u955c\u50cf\u6e90\nregistry=https://registry.npmmirror.com\n\n# \u79c1\u6709\u4ed3\u5e93\n@mycompany:registry=https://npm.mycompany.com\n\n# \u8ba4\u8bc1\n//npm.mycompany.com/:_authToken=${NPM_TOKEN}\n\n# \u5176\u4ed6\u914d\u7f6e\nsave-exact=true\nengine-strict=true\n"})}),"\n",(0,p.jsx)(e.h3,{id:"nvmrc",children:".nvmrc"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{children:"18.17.0\n"})}),"\n",(0,p.jsx)(e.h3,{id:"engines-\u5b57\u6bb5",children:"engines \u5b57\u6bb5"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-json",children:'{\n  "engines": {\n    "node": ">=18.0.0",\n    "pnpm": ">=8.0.0"\n  }\n}\n'})}),"\n",(0,p.jsx)(e.hr,{}),"\n",(0,p.jsx)(e.h2,{id:"\ufe0f-\u5b9e\u7528\u6280\u5de7",children:"\ud83d\udee0\ufe0f \u5b9e\u7528\u6280\u5de7"}),"\n",(0,p.jsx)(e.h3,{id:"1-\u67e5\u770b\u4f9d\u8d56\u4fe1\u606f",children:"1. \u67e5\u770b\u4f9d\u8d56\u4fe1\u606f"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-bash",children:"# \u67e5\u770b\u5305\u4fe1\u606f\nnpm info lodash\npnpm info lodash\n\n# \u67e5\u770b\u5df2\u5b89\u88c5\u7248\u672c\nnpm ls lodash\npnpm ls lodash\n\n# \u67e5\u770b\u8fc7\u671f\u4f9d\u8d56\nnpm outdated\npnpm outdated\n\n# \u67e5\u770b\u4f9d\u8d56\u6811\nnpm ls --all\npnpm ls --depth 3\n"})}),"\n",(0,p.jsx)(e.h3,{id:"2-\u6e05\u7406\u7f13\u5b58",children:"2. \u6e05\u7406\u7f13\u5b58"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-bash",children:"# npm\nnpm cache clean --force\n\n# pnpm\npnpm store prune\npnpm store path  # \u67e5\u770b\u5b58\u50a8\u8def\u5f84\n"})}),"\n",(0,p.jsx)(e.h3,{id:"3-\u5b89\u5168\u5ba1\u8ba1",children:"3. \u5b89\u5168\u5ba1\u8ba1"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-bash",children:"# \u5b89\u5168\u68c0\u67e5\nnpm audit\npnpm audit\n\n# \u81ea\u52a8\u4fee\u590d\nnpm audit fix\n"})}),"\n",(0,p.jsx)(e.h3,{id:"4-\u53d1\u5e03\u5305",children:"4. \u53d1\u5e03\u5305"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-bash",children:"# \u767b\u5f55\nnpm login\npnpm login\n\n# \u53d1\u5e03\nnpm publish\npnpm publish\n\n# \u53d1\u5e03\u6d4b\u8bd5\u7248\nnpm publish --tag beta\n\n# \u8bbe\u7f6e\u7248\u672c\nnpm version patch  # 1.0.0 -> 1.0.1\nnpm version minor  # 1.0.0 -> 1.1.0\nnpm version major  # 1.0.0 -> 2.0.0\n"})}),"\n",(0,p.jsx)(e.hr,{}),"\n",(0,p.jsx)(e.h2,{id:"-workspaces",children:"\ud83d\udcc2 Workspaces"}),"\n",(0,p.jsx)(e.h3,{id:"pnpm-workspaceyaml",children:"pnpm-workspace.yaml"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-yaml",children:"packages:\n  - 'packages/*'\n  - 'apps/*'\n"})}),"\n",(0,p.jsx)(e.h3,{id:"\u76ee\u5f55\u7ed3\u6784",children:"\u76ee\u5f55\u7ed3\u6784"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{children:"my-monorepo/\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 pnpm-workspace.yaml\n\u251c\u2500\u2500 packages/\n\u2502   \u251c\u2500\u2500 shared/\n\u2502   \u2502   \u2514\u2500\u2500 package.json\n\u2502   \u2514\u2500\u2500 utils/\n\u2502       \u2514\u2500\u2500 package.json\n\u2514\u2500\u2500 apps/\n    \u251c\u2500\u2500 web/\n    \u2502   \u2514\u2500\u2500 package.json\n    \u2514\u2500\u2500 api/\n        \u2514\u2500\u2500 package.json\n"})}),"\n",(0,p.jsx)(e.h3,{id:"workspace-\u547d\u4ee4",children:"Workspace \u547d\u4ee4"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-bash",children:"# \u5b89\u88c5\u6240\u6709\u5305\u7684\u4f9d\u8d56\npnpm install\n\n# \u5728\u7279\u5b9a\u5305\u4e2d\u8fd0\u884c\u547d\u4ee4\npnpm --filter @myorg/web dev\npnpm -F @myorg/web dev\n\n# \u5728\u6240\u6709\u5305\u4e2d\u8fd0\u884c\u547d\u4ee4\npnpm -r build\npnpm --recursive build\n\n# \u6dfb\u52a0\u5305\u4e4b\u95f4\u7684\u4f9d\u8d56\npnpm -F @myorg/web add @myorg/shared\n\n# \u6dfb\u52a0\u5916\u90e8\u4f9d\u8d56\u5230\u7279\u5b9a\u5305\npnpm -F @myorg/web add lodash\n\n# \u6dfb\u52a0\u5230\u6839\u9879\u76ee\npnpm add -w typescript\n"})}),"\n",(0,p.jsx)(e.hr,{}),"\n",(0,p.jsx)(e.h2,{id:"-\u811a\u672c\u6280\u5de7",children:"\ud83d\udd27 \u811a\u672c\u6280\u5de7"}),"\n",(0,p.jsx)(e.h3,{id:"\u5e76\u884c\u4e32\u884c\u6267\u884c",children:"\u5e76\u884c/\u4e32\u884c\u6267\u884c"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-json",children:'{\n  "scripts": {\n    "build:all": "pnpm -r build",\n    "dev": "pnpm -r --parallel dev",\n    "test": "pnpm -r --sequential test"\n  }\n}\n'})}),"\n",(0,p.jsx)(e.h3,{id:"\u524d\u7f6e\u540e\u7f6e\u811a\u672c",children:"\u524d\u7f6e/\u540e\u7f6e\u811a\u672c"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-json",children:'{\n  "scripts": {\n    "prebuild": "rm -rf dist",\n    "build": "tsc",\n    "postbuild": "echo \'Build complete!\'"\n  }\n}\n'})}),"\n",(0,p.jsx)(e.h3,{id:"\u8de8\u5e73\u53f0\u811a\u672c",children:"\u8de8\u5e73\u53f0\u811a\u672c"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-bash",children:'# \u5b89\u88c5 cross-env\npnpm add -D cross-env\n\n# \u4f7f\u7528\n"scripts": {\n  "build": "cross-env NODE_ENV=production webpack"\n}\n'})}),"\n",(0,p.jsx)(e.hr,{}),"\n",(0,p.jsx)(e.h2,{id:"-\u5e38\u89c1\u95ee\u9898",children:"\u2753 \u5e38\u89c1\u95ee\u9898"}),"\n",(0,p.jsx)(e.h3,{id:"\u5e7d\u7075\u4f9d\u8d56",children:"\u5e7d\u7075\u4f9d\u8d56"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-markdown",children:"\u95ee\u9898\uff1a\u9879\u76ee\u4e2d\u4f7f\u7528\u4e86\u672a\u58f0\u660e\u7684\u4f9d\u8d56\uff08\u901a\u8fc7\u5176\u4ed6\u5305\u95f4\u63a5\u5b89\u88c5\uff09\n\nnpm\uff1a\u6241\u5e73\u5316\u5b89\u88c5\uff0c\u53ef\u80fd\u53ef\u4ee5\u4f7f\u7528\u672a\u58f0\u660e\u7684\u5305\npnpm\uff1a\u4e25\u683c\u6a21\u5f0f\uff0c\u5fc5\u987b\u663e\u5f0f\u58f0\u660e\n\n\u89e3\u51b3\uff1a\u4f7f\u7528 pnpm \u6216\u660e\u786e\u58f0\u660e\u6240\u6709\u4f7f\u7528\u7684\u4f9d\u8d56\n"})}),"\n",(0,p.jsx)(e.h3,{id:"\u4f9d\u8d56\u51b2\u7a81",children:"\u4f9d\u8d56\u51b2\u7a81"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-bash",children:'# \u67e5\u770b\u4e3a\u4ec0\u4e48\u5b89\u88c5\u4e86\u67d0\u4e2a\u7248\u672c\npnpm why lodash\n\n# \u5f3a\u5236\u4f7f\u7528\u7279\u5b9a\u7248\u672c\n# package.json\n{\n  "pnpm": {\n    "overrides": {\n      "lodash": "4.17.21"\n    }\n  }\n}\n'})}),"\n",(0,p.jsx)(e.h3,{id:"\u5b89\u88c5\u5931\u8d25",children:"\u5b89\u88c5\u5931\u8d25"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-bash",children:"# \u6e05\u7406\u91cd\u8bd5\nrm -rf node_modules\nrm pnpm-lock.yaml\npnpm install\n\n# \u5ffd\u7565\u811a\u672c\npnpm install --ignore-scripts\n"})}),"\n",(0,p.jsx)(e.hr,{}),"\n",(0,p.jsx)(e.h2,{id:"-\u63a8\u8350\u914d\u7f6e",children:"\ud83d\udcda \u63a8\u8350\u914d\u7f6e"}),"\n",(0,p.jsx)(e.pre,{children:(0,p.jsx)(e.code,{className:"language-json",children:'{\n  "scripts": {\n    "preinstall": "npx only-allow pnpm"\n  },\n  "packageManager": "pnpm@8.10.0",\n  "engines": {\n    "node": ">=18.0.0",\n    "pnpm": ">=8.0.0"\n  }\n}\n'})}),"\n",(0,p.jsx)(e.hr,{}),"\n",(0,p.jsx)(e.p,{children:"\u9009\u62e9 pnpm \u53ef\u4ee5\u83b7\u5f97\u66f4\u597d\u7684\u6027\u80fd\u548c\u66f4\u4e25\u683c\u7684\u4f9d\u8d56\u7ba1\u7406\u3002\u5bf9\u4e8e\u65b0\u9879\u76ee\uff0c\u63a8\u8350\u4f7f\u7528 pnpm\u3002"})]})}function m(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,p.jsx)(e,{...n,children:(0,p.jsx)(t,{...n})}):t(n)}},4514:n=>{n.exports=JSON.parse('{"permalink":"/blog/npm-pnpm-guide","editUrl":"https://github.com/hweos/git-pages/edit/main/blog/2024-08-01-npm-pnpm.md","source":"@site/blog/2024-08-01-npm-pnpm.md","title":"npm/pnpm \u5305\u7ba1\u7406\u5b9e\u8df5\u6307\u5357","description":"\u5305\u7ba1\u7406\u5668\u662f\u524d\u7aef\u5f00\u53d1\u7684\u57fa\u7840\u5de5\u5177\u3002\u672c\u6587\u5bf9\u6bd4 npm \u548c pnpm\uff0c\u5206\u4eab\u6700\u4f73\u5b9e\u8df5\u3002","date":"2024-08-01T00:00:00.000Z","tags":[{"inline":true,"label":"npm","permalink":"/blog/tags/npm"},{"inline":true,"label":"pnpm","permalink":"/blog/tags/pnpm"},{"inline":true,"label":"\u5de5\u5177","permalink":"/blog/tags/\u5de5\u5177"},{"inline":true,"label":"\u524d\u7aef\u5de5\u7a0b\u5316","permalink":"/blog/tags/\u524d\u7aef\u5de5\u7a0b\u5316"}],"readingTime":3.83,"hasTruncateMarker":true,"authors":[{"name":"Mason","title":"Full Stack Developer","url":"https://github.com/HuangZhe007","socials":{"github":"https://github.com/HuangZhe007"},"imageURL":"https://avatars.githubusercontent.com/u/45168628?v=4","key":"mason","page":null}],"frontMatter":{"slug":"npm-pnpm-guide","title":"npm/pnpm \u5305\u7ba1\u7406\u5b9e\u8df5\u6307\u5357","authors":"mason","tags":["npm","pnpm","\u5de5\u5177","\u524d\u7aef\u5de5\u7a0b\u5316"]},"unlisted":false,"prevItem":{"title":"\u54cd\u5e94\u5f0f\u8bbe\u8ba1\u5b9e\u6218\u6307\u5357","permalink":"/blog/responsive-design"},"nextItem":{"title":"\u6b63\u5219\u8868\u8fbe\u5f0f\u5b9e\u6218\u6280\u5de7","permalink":"/blog/regex-practical-guide"}}')},8453:(n,e,l)=>{l.d(e,{R:()=>d,x:()=>i});var s=l(6540);const p={},a=s.createContext(p);function d(n){const e=s.useContext(a);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(p):n.components||p:d(n.components),s.createElement(a.Provider,{value:e},n.children)}}}]);