"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5312],{8053:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>o,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"frontend/typescript-tips","title":"TypeScript \u5b9e\u6218\u6280\u5de7","description":"TypeScript \u7c7b\u578b\u4f53\u64cd\u3001\u5de5\u5177\u7c7b\u578b\u4e0e\u5e38\u89c1\u9677\u9631","source":"@site/docs/frontend/typescript-tips.md","sourceDirName":"frontend","slug":"/frontend/typescript-tips","permalink":"/docs/frontend/typescript-tips","draft":false,"unlisted":false,"editUrl":"https://github.com/hweos/git-pages/edit/main/docs/frontend/typescript-tips.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"slug":"typescript-tips","title":"TypeScript \u5b9e\u6218\u6280\u5de7","description":"TypeScript \u7c7b\u578b\u4f53\u64cd\u3001\u5de5\u5177\u7c7b\u578b\u4e0e\u5e38\u89c1\u9677\u9631"},"sidebar":"docsSidebar","previous":{"title":"Frontend","permalink":"/docs/category/frontend"},"next":{"title":"CSS \u5e03\u5c40\u6280\u5de7","permalink":"/docs/frontend/css-layout"}}');var i=r(4848),s=r(8453);const l={sidebar_position:1,slug:"typescript-tips",title:"TypeScript \u5b9e\u6218\u6280\u5de7",description:"TypeScript \u7c7b\u578b\u4f53\u64cd\u3001\u5de5\u5177\u7c7b\u578b\u4e0e\u5e38\u89c1\u9677\u9631"},a="TypeScript \u5b9e\u6218\u6280\u5de7",c={},d=[{value:"\ud83d\udcda \u57fa\u7840\u7c7b\u578b\u6280\u5de7",id:"-\u57fa\u7840\u7c7b\u578b\u6280\u5de7",level:2},{value:"\u7c7b\u578b\u63a8\u65ad",id:"\u7c7b\u578b\u63a8\u65ad",level:3},{value:"\u7c7b\u578b\u65ad\u8a00",id:"\u7c7b\u578b\u65ad\u8a00",level:3},{value:"\ud83d\udd27 \u5e38\u7528\u5de5\u5177\u7c7b\u578b",id:"-\u5e38\u7528\u5de5\u5177\u7c7b\u578b",level:2},{value:"Partial &amp; Required",id:"partial--required",level:3},{value:"Pick &amp; Omit",id:"pick--omit",level:3},{value:"Record",id:"record",level:3},{value:"ReturnType &amp; Parameters",id:"returntype--parameters",level:3},{value:"\ud83c\udfaf \u7c7b\u578b\u4f53\u64cd\u5b9e\u6218",id:"-\u7c7b\u578b\u4f53\u64cd\u5b9e\u6218",level:2},{value:"\u4ece\u6570\u7ec4\u63d0\u53d6\u7c7b\u578b",id:"\u4ece\u6570\u7ec4\u63d0\u53d6\u7c7b\u578b",level:3},{value:"\u83b7\u53d6\u5bf9\u8c61\u7684\u952e/\u503c\u7c7b\u578b",id:"\u83b7\u53d6\u5bf9\u8c61\u7684\u952e\u503c\u7c7b\u578b",level:3},{value:"\u6761\u4ef6\u7c7b\u578b",id:"\u6761\u4ef6\u7c7b\u578b",level:3},{value:"\u6a21\u677f\u5b57\u9762\u91cf\u7c7b\u578b",id:"\u6a21\u677f\u5b57\u9762\u91cf\u7c7b\u578b",level:3},{value:"\u26a0\ufe0f \u5e38\u89c1\u9677\u9631",id:"\ufe0f-\u5e38\u89c1\u9677\u9631",level:2},{value:"1. \u5bf9\u8c61\u5b57\u9762\u91cf\u7684\u591a\u4f59\u5c5e\u6027\u68c0\u67e5",id:"1-\u5bf9\u8c61\u5b57\u9762\u91cf\u7684\u591a\u4f59\u5c5e\u6027\u68c0\u67e5",level:3},{value:"2. \u7c7b\u578b\u6536\u7a84",id:"2-\u7c7b\u578b\u6536\u7a84",level:3},{value:"3. \u6570\u7ec4\u65b9\u6cd5\u7684\u7c7b\u578b\u95ee\u9898",id:"3-\u6570\u7ec4\u65b9\u6cd5\u7684\u7c7b\u578b\u95ee\u9898",level:3},{value:"4. \u6cdb\u578b\u7ea6\u675f",id:"4-\u6cdb\u578b\u7ea6\u675f",level:3},{value:"\ud83d\udca1 \u6700\u4f73\u5b9e\u8df5",id:"-\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u4f18\u5148\u4f7f\u7528 interface",id:"1-\u4f18\u5148\u4f7f\u7528-interface",level:3},{value:"2. \u4f7f\u7528 unknown \u66ff\u4ee3 any",id:"2-\u4f7f\u7528-unknown-\u66ff\u4ee3-any",level:3},{value:"3. \u4f7f\u7528 satisfies \u64cd\u4f5c\u7b26",id:"3-\u4f7f\u7528-satisfies-\u64cd\u4f5c\u7b26",level:3},{value:"\ud83d\udcda \u63a8\u8350\u8d44\u6e90",id:"-\u63a8\u8350\u8d44\u6e90",level:2}];function p(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"typescript-\u5b9e\u6218\u6280\u5de7",children:"TypeScript \u5b9e\u6218\u6280\u5de7"})}),"\n",(0,i.jsx)(n.p,{children:"\u672c\u6587\u603b\u7ed3 TypeScript \u5f00\u53d1\u4e2d\u7684\u5b9e\u7528\u6280\u5de7\uff0c\u5e2e\u52a9\u4f60\u5199\u51fa\u66f4\u5b89\u5168\u3001\u66f4\u4f18\u96c5\u7684\u4ee3\u7801\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"-\u57fa\u7840\u7c7b\u578b\u6280\u5de7",children:"\ud83d\udcda \u57fa\u7840\u7c7b\u578b\u6280\u5de7"}),"\n",(0,i.jsx)(n.h3,{id:"\u7c7b\u578b\u63a8\u65ad",children:"\u7c7b\u578b\u63a8\u65ad"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// \u2705 \u8ba9 TS \u81ea\u52a8\u63a8\u65ad\nconst numbers = [1, 2, 3];  // number[]\nconst user = { name: 'Tom', age: 18 };  // { name: string; age: number }\n\n// \u2705 \u4f7f\u7528 as const \u83b7\u53d6\u5b57\u9762\u91cf\u7c7b\u578b\nconst colors = ['red', 'green', 'blue'] as const;\n// type: readonly [\"red\", \"green\", \"blue\"]\n\nconst config = {\n  api: '/api',\n  timeout: 3000\n} as const;\n// type: { readonly api: \"/api\"; readonly timeout: 3000 }\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u7c7b\u578b\u65ad\u8a00",children:"\u7c7b\u578b\u65ad\u8a00"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// \u4f7f\u7528 as \u65ad\u8a00\nconst input = document.getElementById('input') as HTMLInputElement;\ninput.value = 'hello';\n\n// \u975e\u7a7a\u65ad\u8a00 (\u8c28\u614e\u4f7f\u7528)\nfunction process(value: string | null) {\n  console.log(value!.toUpperCase());  // \u786e\u5b9a\u4e0d\u4e3a null\n}\n\n// \u66f4\u5b89\u5168\u7684\u65b9\u5f0f\nfunction processSafe(value: string | null) {\n  if (value) {\n    console.log(value.toUpperCase());\n  }\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-\u5e38\u7528\u5de5\u5177\u7c7b\u578b",children:"\ud83d\udd27 \u5e38\u7528\u5de5\u5177\u7c7b\u578b"}),"\n",(0,i.jsx)(n.h3,{id:"partial--required",children:"Partial & Required"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"interface User {\n  id: number;\n  name: string;\n  email: string;\n}\n\n// \u6240\u6709\u5c5e\u6027\u53d8\u4e3a\u53ef\u9009\ntype PartialUser = Partial<User>;\n// { id?: number; name?: string; email?: string }\n\n// \u6240\u6709\u5c5e\u6027\u53d8\u4e3a\u5fc5\u9009\ntype RequiredUser = Required<PartialUser>;\n// { id: number; name: string; email: string }\n"})}),"\n",(0,i.jsx)(n.h3,{id:"pick--omit",children:"Pick & Omit"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"interface User {\n  id: number;\n  name: string;\n  email: string;\n  password: string;\n}\n\n// \u9009\u53d6\u90e8\u5206\u5c5e\u6027\ntype UserInfo = Pick<User, 'id' | 'name' | 'email'>;\n// { id: number; name: string; email: string }\n\n// \u6392\u9664\u90e8\u5206\u5c5e\u6027\ntype SafeUser = Omit<User, 'password'>;\n// { id: number; name: string; email: string }\n"})}),"\n",(0,i.jsx)(n.h3,{id:"record",children:"Record"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// \u521b\u5efa\u952e\u503c\u5bf9\u7c7b\u578b\ntype Status = 'pending' | 'success' | 'error';\ntype StatusMap = Record<Status, string>;\n\nconst statusText: StatusMap = {\n  pending: '\u5904\u7406\u4e2d',\n  success: '\u6210\u529f',\n  error: '\u5931\u8d25'\n};\n"})}),"\n",(0,i.jsx)(n.h3,{id:"returntype--parameters",children:"ReturnType & Parameters"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"function fetchUser(id: number): Promise<User> {\n  return fetch(`/api/user/${id}`).then(r => r.json());\n}\n\n// \u83b7\u53d6\u51fd\u6570\u8fd4\u56de\u7c7b\u578b\ntype FetchUserReturn = ReturnType<typeof fetchUser>;\n// Promise<User>\n\n// \u83b7\u53d6\u51fd\u6570\u53c2\u6570\u7c7b\u578b\ntype FetchUserParams = Parameters<typeof fetchUser>;\n// [id: number]\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-\u7c7b\u578b\u4f53\u64cd\u5b9e\u6218",children:"\ud83c\udfaf \u7c7b\u578b\u4f53\u64cd\u5b9e\u6218"}),"\n",(0,i.jsx)(n.h3,{id:"\u4ece\u6570\u7ec4\u63d0\u53d6\u7c7b\u578b",children:"\u4ece\u6570\u7ec4\u63d0\u53d6\u7c7b\u578b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const fruits = ['apple', 'banana', 'orange'] as const;\ntype Fruit = typeof fruits[number];\n// 'apple' | 'banana' | 'orange'\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u83b7\u53d6\u5bf9\u8c61\u7684\u952e\u503c\u7c7b\u578b",children:"\u83b7\u53d6\u5bf9\u8c61\u7684\u952e/\u503c\u7c7b\u578b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const userMap = {\n  admin: { role: 'admin', level: 10 },\n  guest: { role: 'guest', level: 1 }\n};\n\ntype UserKey = keyof typeof userMap;  // 'admin' | 'guest'\ntype UserValue = typeof userMap[UserKey];  // { role: string; level: number }\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u6761\u4ef6\u7c7b\u578b",children:"\u6761\u4ef6\u7c7b\u578b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"type IsString<T> = T extends string ? true : false;\n\ntype A = IsString<'hello'>;  // true\ntype B = IsString<123>;      // false\n\n// \u63d0\u53d6 Promise \u5185\u90e8\u7c7b\u578b\ntype UnwrapPromise<T> = T extends Promise<infer U> ? U : T;\n\ntype C = UnwrapPromise<Promise<string>>;  // string\ntype D = UnwrapPromise<number>;           // number\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u6a21\u677f\u5b57\u9762\u91cf\u7c7b\u578b",children:"\u6a21\u677f\u5b57\u9762\u91cf\u7c7b\u578b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"type EventName = 'click' | 'focus' | 'blur';\ntype Handler = `on${Capitalize<EventName>}`;\n// 'onClick' | 'onFocus' | 'onBlur'\n\ntype HTTPMethod = 'GET' | 'POST' | 'PUT' | 'DELETE';\ntype Endpoint = `/api/${string}`;\ntype Request = `${HTTPMethod} ${Endpoint}`;\n// 'GET /api/...' | 'POST /api/...' | ...\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\ufe0f-\u5e38\u89c1\u9677\u9631",children:"\u26a0\ufe0f \u5e38\u89c1\u9677\u9631"}),"\n",(0,i.jsx)(n.h3,{id:"1-\u5bf9\u8c61\u5b57\u9762\u91cf\u7684\u591a\u4f59\u5c5e\u6027\u68c0\u67e5",children:"1. \u5bf9\u8c61\u5b57\u9762\u91cf\u7684\u591a\u4f59\u5c5e\u6027\u68c0\u67e5"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"interface Config {\n  url: string;\n  timeout: number;\n}\n\n// \u274c \u62a5\u9519\uff1a\u591a\u4f59\u7684\u5c5e\u6027\nconst config: Config = {\n  url: '/api',\n  timeout: 3000,\n  retry: 3  // Error!\n};\n\n// \u2705 \u4f7f\u7528\u53d8\u91cf\u7ed5\u8fc7\u68c0\u67e5\nconst options = { url: '/api', timeout: 3000, retry: 3 };\nconst config2: Config = options;  // OK\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-\u7c7b\u578b\u6536\u7a84",children:"2. \u7c7b\u578b\u6536\u7a84"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"function process(value: string | number) {\n  // \u274c \u9519\u8bef\n  // value.toUpperCase();  // Error!\n  \n  // \u2705 \u6b63\u786e\uff1a\u5148\u68c0\u67e5\u7c7b\u578b\n  if (typeof value === 'string') {\n    value.toUpperCase();  // OK\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-\u6570\u7ec4\u65b9\u6cd5\u7684\u7c7b\u578b\u95ee\u9898",children:"3. \u6570\u7ec4\u65b9\u6cd5\u7684\u7c7b\u578b\u95ee\u9898"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const arr = [1, 2, 3];\n\n// \u274c find \u53ef\u80fd\u8fd4\u56de undefined\nconst found = arr.find(x => x > 2);\n// found: number | undefined\n\n// \u2705 \u4f7f\u7528\u975e\u7a7a\u65ad\u8a00\u6216\u6761\u4ef6\u5224\u65ad\nconst found2 = arr.find(x => x > 2)!;  // number\n// \u6216\nif (found !== undefined) {\n  console.log(found * 2);\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-\u6cdb\u578b\u7ea6\u675f",children:"4. \u6cdb\u578b\u7ea6\u675f"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// \u274c \u8fc7\u4e8e\u5bbd\u677e\nfunction getLength<T>(value: T) {\n  return value.length;  // Error: length \u4e0d\u5b58\u5728\n}\n\n// \u2705 \u6dfb\u52a0\u7ea6\u675f\nfunction getLength<T extends { length: number }>(value: T) {\n  return value.length;  // OK\n}\n\ngetLength('hello');   // 5\ngetLength([1, 2, 3]); // 3\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-\u6700\u4f73\u5b9e\u8df5",children:"\ud83d\udca1 \u6700\u4f73\u5b9e\u8df5"}),"\n",(0,i.jsx)(n.h3,{id:"1-\u4f18\u5148\u4f7f\u7528-interface",children:"1. \u4f18\u5148\u4f7f\u7528 interface"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// \u2705 \u63a8\u8350\uff1a\u53ef\u6269\u5c55\ninterface User {\n  name: string;\n}\n\ninterface User {\n  age: number;  // \u58f0\u660e\u5408\u5e76\n}\n\n// type \u4e0d\u80fd\u58f0\u660e\u5408\u5e76\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-\u4f7f\u7528-unknown-\u66ff\u4ee3-any",children:"2. \u4f7f\u7528 unknown \u66ff\u4ee3 any"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// \u274c any \u8df3\u8fc7\u7c7b\u578b\u68c0\u67e5\nfunction process(value: any) {\n  value.foo.bar;  // \u4e0d\u62a5\u9519\uff0c\u4f46\u8fd0\u884c\u65f6\u53ef\u80fd\u51fa\u9519\n}\n\n// \u2705 unknown \u5f3a\u5236\u7c7b\u578b\u68c0\u67e5\nfunction processSafe(value: unknown) {\n  if (typeof value === 'object' && value !== null) {\n    // \u5b89\u5168\u64cd\u4f5c\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-\u4f7f\u7528-satisfies-\u64cd\u4f5c\u7b26",children:"3. \u4f7f\u7528 satisfies \u64cd\u4f5c\u7b26"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// TypeScript 4.9+\nconst palette = {\n  red: [255, 0, 0],\n  green: '#00ff00'\n} satisfies Record<string, string | number[]>;\n\n// palette.red \u4ecd\u7136\u662f number[] \u7c7b\u578b\uff0c\u800c\u4e0d\u662f string | number[]\npalette.red.map(x => x * 2);  // OK\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-\u63a8\u8350\u8d44\u6e90",children:"\ud83d\udcda \u63a8\u8350\u8d44\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.typescriptlang.org/docs/",children:"TypeScript \u5b98\u65b9\u6587\u6863"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/type-challenges/type-challenges",children:"Type Challenges"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://basarat.gitbook.io/typescript/",children:"TypeScript Deep Dive"})}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>a});var t=r(6540);const i={},s=t.createContext(i);function l(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);